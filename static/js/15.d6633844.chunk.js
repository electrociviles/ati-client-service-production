(this.webpackJsonpati=this.webpackJsonpati||[]).push([[15],{1021:function(e,a,t){"use strict";var n=t(17);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(1)),o=(0,n(t(18)).default)(r.default.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"Restore");a.default=o},1113:function(e,a,t){"use strict";t.r(a);var n=t(14),r=t(11),o=t(1),l=t.n(o),c=t(939),i=t(267),s=t(268),u=t(28),m=t(944),p=t(37),d=t(113),g=t(12),b=(t(55),t(465)),f=t(488),E=t(472),O=t(466),h=Object(c.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(g.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})),v=function(e){console.log("props",e);var a=h(),t=Object(o.useState)(!1),r=Object(n.a)(t,2);r[0],r[1];return l.a.createElement(b.a,null,l.a.createElement(f.a,{title:"Detalle Usuario"}),l.a.createElement(E.a,null),l.a.createElement(O.a,{className:a.content},l.a.createElement(i.a,null,l.a.createElement(s.a,null,l.a.createElement(p.a,null,l.a.createElement(u.a,null,"Nombres"),l.a.createElement(u.a,null,e.person.names)),l.a.createElement(p.a,{selected:!0},l.a.createElement(u.a,null,"Apellidos"),l.a.createElement(u.a,null,e.person.last_name)),l.a.createElement(p.a,null,l.a.createElement(u.a,null,"Tipo de documento"),l.a.createElement(u.a,null,e.person.documentType?e.person.documentType.documentType:"")),l.a.createElement(p.a,{selected:!0},l.a.createElement(u.a,null,"N\xfamero de documento"),l.a.createElement(u.a,null,e.person.documentNumber," ",e.person.checkDigit>=0?e.person.checkDigit:"")),l.a.createElement(p.a,null,l.a.createElement(u.a,null,"Correo electr\xf3nico"),l.a.createElement(u.a,null,e.person.email)),l.a.createElement(p.a,{selected:!0},l.a.createElement(u.a,null,"Direcci\xf3n"),l.a.createElement(u.a,null,e.person.address)),l.a.createElement(p.a,null,l.a.createElement(u.a,null,"Correo electr\xf3nico"),l.a.createElement(u.a,null,e.person.email))))))},C=t(204),j=t(941),x=t.n(j),S=t(291),y=t.n(S),k=t(719),N=t(721),P=t(720),w=t(948),F=t(297),W=t.n(F),T=t(495),B=t(1021),H=t.n(B),I=t(72),R=t(943),_=t(273),U=t(49),z=t(3),D=t(1115),M=t(1025),A=t(489),L=t(64),G=t(1016),q=(t(1017),Object(c.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(g.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})));var V=function(e){Object(o.useEffect)((function(){console.log(e),Object(L.r)().then((function(e){O(e.roles)})),e.person&&(x(e.person.name),N(e.person.document_number),W(e.person.username),ee(e.person.role))}),[]);var a=Object(o.useState)([]),t=Object(n.a)(a,2),r=(t[0],t[1],Object(o.useState)(!1)),c=Object(n.a)(r,2),i=c[0],s=(c[1],Object(o.useState)({})),u=Object(n.a)(s,2),m=u[0],p=u[1],g=q(),b=Object(o.useState)([]),f=Object(n.a)(b,2),E=f[0],O=f[1],h=Object(o.useState)(""),v=Object(n.a)(h,2),j=v[0],x=v[1],S=Object(o.useState)(""),y=Object(n.a)(S,2),k=y[0],N=y[1],P=Object(o.useState)(""),w=Object(n.a)(P,2),F=w[0],W=w[1],T=Object(o.useState)(""),B=Object(n.a)(T,2),H=B[0],V=B[1],J=Object(o.useState)(""),K=Object(n.a)(J,2),Q=K[0],X=K[1],Y=Object(o.useState)(null),Z=Object(n.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(o.useState)(!1),te=Object(n.a)(ae,2),ne=te[0],re=te[1],oe=Object(o.useState)(""),le=Object(n.a)(oe,2),ce=le[0],ie=le[1],se=Object(o.useState)(!1),ue=Object(n.a)(se,2),me=ue[0],pe=ue[1],de=Object(o.useState)(""),ge=Object(n.a)(de,2),be=ge[0],fe=ge[1],Ee=function(e){var a=void 0!==e?e:j;return null==a||""===a.toString().trim()?(re(!0),ie("Este campo es requerido"),1):(re(!1),ie(""),0)},Oe=function(e){var a=void 0!==e?e:k;return null==a||""===a.toString().trim()?(pe(!0),fe("Este campo es requerido"),1):(pe(!1),fe(""),0)},he=function(a){var t=function(){var e=0;return e+=Ee()}();if(t+=Oe(),H&&Q&&H!==Q&&(t++,G.b.error("Las contrase\xf1as no son iguales",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})),0===t){var n=new FormData;e.person&&n.append("id",e.person._id),n.append("photo",m),n.append("name",j),n.append("username",F),n.append("documentNumber",k),n.append("role",$._id),n.append("password",H),e.person?Object(L.S)(n).then((function(e){console.log("response",e),"success"==e.status?G.b.info("Funcionario registrado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):G.b.error("Ocurri\xf3 un error al registrar el funcionario",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})):Object(L.g)(n).then((function(a){console.log("response",a),"success"==a.status?(G.b.info("Funcionario registrado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.onCloseModal(!0)):G.b.error(a.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else G.b.error("\ud83e\udd84 Wow so easy!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return l.a.createElement(o.Fragment,null,l.a.createElement(G.a,null),l.a.createElement(R.a,{maxWidth:"md"},l.a.createElement(d.a,{className:g.paper},l.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(e){e.preventDefault(),he()}},l.a.createElement(I.a,{container:!0,spacing:3},l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(D.a,{fullWidth:!0,size:"small",getOptionLabel:function(e){return"".concat(e.name.toString().toUpperCase()," ")},filterOptions:function(e){return e},options:E,autoComplete:!0,getOptionSelected:function(e,a){return e===a},onChange:function(e,a){ee(a)},onInputChange:function(e,a){if(a.toString().trim().length>0){var t={search:a.toString().trim()};Object(L.r)(t).then((function(e){O(e.roles)}))}},renderInput:function(e){return l.a.createElement(A.a,Object.assign({},e,{label:"Roles",variant:"outlined",margin:"dense"}))},renderTags:function(e,a){return e.map((function(e,t){return l.a.createElement(_.a,Object.assign({label:e.name},a({index:t}),{disabled:-1!==E.indexOf(e)}))}))},renderOption:function(e){return l.a.createElement(I.a,{container:!0,alignItems:"center"},l.a.createElement(I.a,{item:!0,xs:!0},l.a.createElement(U.a,null,"".concat(e.name.toString().toUpperCase()))))}})),l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(A.a,{fullWidth:!0,error:ne,helperText:ce,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(z.a)(g.margin,g.textField),variant:"outlined",label:"Nombre",value:j,onChange:function(e){x(e.target.value),Ee(e.target.value)}})),l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(A.a,{fullWidth:!0,error:me,helperText:be,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(z.a)(g.margin,g.textField),variant:"outlined",value:k,onChange:function(e){N(e.target.value),Oe(e.target.value)},label:"Documento"})),l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(A.a,{fullWidth:!0,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(z.a)(g.margin,g.textField),variant:"outlined",label:"Nombre de usuario",value:F,onChange:function(e){W(e.target.value)}})),l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(A.a,{fullWidth:!0,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(z.a)(g.margin,g.textField),variant:"outlined",type:"password",label:"Contrase\xf1a",onChange:function(e){V(e.target.value)}})),l.a.createElement(I.a,{item:!0,xs:12,sm:4},l.a.createElement(A.a,{fullWidth:!0,margin:"dense",autoComplete:"off",type:"password",id:"outlined-simple-start-adornment",className:Object(z.a)(g.margin,g.textField),variant:"outlined",label:"Repite la contrase\xf1a",onChange:function(e){X(e.target.value)}})),l.a.createElement(I.a,{item:!0,xs:12,sm:12},l.a.createElement(M.a,{open:!0,filesLimit:1,dropzoneText:"Arrastre y suelte un archivo de imagen aqu\xed o haga clic",acceptedFiles:["image/jpeg","image/png","image/bmp"],onChange:function(e){p(e[0])}})),l.a.createElement(I.a,{item:!0,xs:2,sm:3},l.a.createElement(C.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},e.person?"Actualizar":"Guardar")))))))},J=t(555),K=t(296),Q=t.n(K),X=t(826),Y=t(950),Z=t(9),$=t(947),ee=t(471),ae=t(116),te=t.n(ae),ne=Object(c.a)((function(e){return{root:{flexGrow:1},iconWidth:{width:10},paper:{padding:e.spacing(2),marginTop:10},button:{margin:e.spacing(1)},input:{display:"none"},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},icon:{marginRight:e.spacing(1),color:"black"}}})),re=Object(Z.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var a=e.children,t=e.classes,n=e.onClose,o=Object(r.a)(e,["children","classes","onClose"]);return l.a.createElement($.a,Object.assign({disableTypography:!0,className:t.root},o),l.a.createElement(U.a,{variant:"h6"},a),n?l.a.createElement(ee.a,{"aria-label":"close",className:t.closeButton,onClick:n},l.a.createElement(te.a,null)):null)})),oe=l.a.forwardRef((function(e,a){return l.a.createElement(T.a,Object.assign({direction:"up",ref:a},e))}));a.default=function(e){Object(o.useEffect)((function(){var e={start:0,end:I,paginate:!0};Object(L.x)(e).then((function(e){g(e.users),O(e.count)}))}),[]);var a=ne(),t=Object(o.useState)([]),r=Object(n.a)(t,2),c=r[0],g=r[1],b=Object(o.useState)(0),f=Object(n.a)(b,2),E=f[0],O=f[1],h=Object(o.useState)(0),j=Object(n.a)(h,2),S=j[0],F=j[1],T=Object(o.useState)(10),B=Object(n.a)(T,2),I=B[0],R=B[1],_=Object(o.useState)(!1),U=Object(n.a)(_,2),z=U[0],D=U[1],M=Object(o.useState)(!1),A=Object(n.a)(M,2),q=A[0],K=A[1],Z=Object(o.useState)(!1),$=Object(n.a)(Z,2),ee=$[0],ae=$[1],te=Object(o.useState)(!1),le=Object(n.a)(te,2),ce=le[0],ie=le[1],se=Object(o.useState)(!1),ue=Object(n.a)(se,2),me=ue[0],pe=ue[1],de=Object(o.useState)({}),ge=Object(n.a)(de,2),be=ge[0],fe=ge[1],Ee=function(){Object(L.x)().then((function(e){g(e.users),O(e.count)}))},Oe=function(e){return function(){fe(e),K(!0)}},he=function(){D(!1)},ve=function(e){return function(){fe(e),ae(!0)}},Ce=function(){ae(!1)},je=function(e){return function(){fe(e),ie(!0)}},xe=function(){ie(!1)},Se=function(){K(!1)},ye=function(){pe(!1)},ke=function(){pe(!1)};return l.a.createElement(o.Fragment,null,l.a.createElement(G.a,null),l.a.createElement(d.a,{className:a.paper},l.a.createElement(X.a,{onClick:function(){pe(!0)},variant:"extended",color:"primary",size:"small",className:a.margin},l.a.createElement(Q.a,{className:a.extendedIcon}),"Nuevo funcionario"),l.a.createElement(i.a,null,l.a.createElement(m.a,null,l.a.createElement(p.a,null,l.a.createElement(u.a,null,"FUNCIONARIO"),l.a.createElement(u.a,null,"DOCUMENTO"),l.a.createElement(u.a,null,"NOMBRE DE USUARIO"),l.a.createElement(u.a,null,"ROL"),l.a.createElement(u.a,null,"FOTO"),l.a.createElement(u.a,null),l.a.createElement(u.a,null),l.a.createElement(u.a,null))),l.a.createElement(s.a,null,c.map((function(e){return l.a.createElement(p.a,{key:e._id},l.a.createElement(u.a,null,e.name," "),l.a.createElement(u.a,null,e.document_number),l.a.createElement(u.a,null,e.username),l.a.createElement(u.a,null,e.role.name),l.a.createElement(u.a,null,e.username),l.a.createElement(u.a,{className:a.iconWidth},l.a.createElement(J.a,{title:"Detalle",placement:"top"},l.a.createElement(W.a,{className:a.icon,onClick:ve(e)}))),l.a.createElement(u.a,{className:a.iconWidth},l.a.createElement(J.a,{title:"Editar",placement:"top"},l.a.createElement(x.a,{className:a.icon,onClick:je(e)}))),l.a.createElement(u.a,{className:a.iconWidth},l.a.createElement(J.a,{title:e.status,placement:"top"},"activo"===e.status?l.a.createElement(y.a,{className:a.icon,onClick:(t=e._id,function(){fe(t),D(!0)})}):l.a.createElement(H.a,{className:a.icon,onClick:Oe(e._id)}))));var t})))),l.a.createElement(Y.a,{rowsPerPageOptions:[10,25,100],component:"div",count:E,rowsPerPage:I,page:S,onChangePage:function(e,a){F(a);var t={start:a*I,end:I,paginate:!0};Object(L.x)(t).then((function(e){g(e.users),O(e.count)}))},onChangeRowsPerPage:function(e){R(+e.target.value),F(0);var a={start:0,end:e.target.value,paginate:!0};Object(L.x)(a).then((function(e){g(e.users),O(e.count)}))}})),l.a.createElement(k.a,{open:z,onClose:he,"aria-labelledby":"draggable-dialog-title"},l.a.createElement(re,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),l.a.createElement(P.a,null,l.a.createElement(w.a,null,"Esta seguro de eliminar este funcionario?")),l.a.createElement(N.a,null,l.a.createElement(C.a,{autoFocus:!0,onClick:he,color:"primary"},"NO"),l.a.createElement(C.a,{onClick:function(){D(!1),Object(L.m)(be).then((function(e){if("success"===e.status){G.b.success(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});var a=c.map((function(e){return be!==e._id||(e.estado="inactivo"),e}));g(a)}else G.b.error(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){G.b.error("Ocurri\xf3 un error al desactivar el funcionario",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"primary"},"SI"))),l.a.createElement(k.a,{open:q,onClose:Se,"aria-labelledby":"draggable-dialog-title"},l.a.createElement(re,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),l.a.createElement(P.a,null,l.a.createElement(w.a,null,"Esta seguro de Reactivar a esta persona?")),l.a.createElement(N.a,null,l.a.createElement(C.a,{autoFocus:!0,onClick:Se,color:"primary"},"NO"),l.a.createElement(C.a,{onClick:function(){K(!1),Object(L.L)(be).then((function(e){if("success"===e.status){G.b.success(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});var a=c.map((function(e){return be!==e._id||(e.estado="activo"),e}));g(a)}else G.b.error(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){G.b.error("Ocurri\xf3 un error al activar el funcionario",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"primary"},"SI"))),l.a.createElement(k.a,{open:ee,onClose:Ce,TransitionComponent:oe},l.a.createElement(P.a,null,l.a.createElement(v,{person:be})),l.a.createElement(N.a,null,l.a.createElement(C.a,{autoFocus:!0,onClick:Ce,color:"primary"},"Cerrar"))),l.a.createElement(k.a,{maxWidth:"md",open:ce,onClose:xe,TransitionComponent:oe},l.a.createElement(P.a,null,l.a.createElement(V,{onCloseModal:ke,onUpdateUsers:Ee,person:be})),l.a.createElement(N.a,null,l.a.createElement(C.a,{autoFocus:!0,onClick:xe,color:"primary"},"Cerrar"))),l.a.createElement(k.a,{fullWidth:!0,maxWidth:"md",open:me},l.a.createElement(re,{onClose:ye},"Crear usuario"),l.a.createElement(P.a,null,l.a.createElement(V,{handleClose:ye,onCloseModal:ke,onUpdateUsers:Ee,modal:!0})),l.a.createElement(N.a,null,l.a.createElement(C.a,{onClick:ye,color:"primary"},"Cerrar"))))}}}]);
//# sourceMappingURL=15.d6633844.chunk.js.map