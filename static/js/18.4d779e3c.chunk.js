(this.webpackJsonpati=this.webpackJsonpati||[]).push([[18],{1122:function(e,t,a){"use strict";a.r(t);var n=a(151),r=a(11),c=a(1),i=a.n(c),o=a(943),l=a(269),s=a(270),u=a(24),m=a(947),f=a(36),d=a(113),p=a(208),b=a(537),O=a.n(b),g=a(293),E=a.n(g),j=a(723),h=a(725),C=a(724),v=a(951),S=a(950),y=a(498),x=a(1023),A=a.n(x),k=a(13),w=a(72),N=a(946),F=a(3),W=a(492),_=a(1120),I=a(46),P=a(275),T=a(51),z=a(1018),B=(a(1019),a(120)),M=a.n(B),D=a(1036),R=a(945),U=a(1114),q=Object(o.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(k.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})),G=function(e){Object(c.useEffect)((function(){console.log("props",e),Object(I.v)().then((function(t){m(t.customers),e.centerOfAttention&&g(e.centerOfAttention.customer)})),e.centerOfAttention&&(x(e.centerOfAttention.title),C(e.centerOfAttention.description),g(e.centerOfAttention.customer))}),[]);var t=Object(c.useState)(!1),a=Object(r.a)(t,2),n=a[0],o=(a[1],q()),l=Object(c.useState)([]),s=Object(r.a)(l,2),u=s[0],m=s[1],f=Object(c.useState)(),b=Object(r.a)(f,2),O=b[0],g=b[1],E=Object(c.useState)(""),j=Object(r.a)(E,2),h=j[0],C=j[1],v=Object(c.useState)(""),S=Object(r.a)(v,2),y=S[0],x=S[1],A=Object(c.useState)(""),k=Object(r.a)(A,2),B=k[0],G=(k[1],Object(c.useState)("")),J=Object(r.a)(G,2),K=J[0],V=(J[1],Object(c.useState)("")),H=Object(r.a)(V,2),L=(H[0],H[1],Object(c.useState)("")),Q=Object(r.a)(L,2),$=Q[0],X=Q[1],Y=Object(c.useState)(!1),Z=Object(r.a)(Y,2),ee=Z[0],te=Z[1],ae=Object(c.useState)(""),ne=Object(r.a)(ae,2),re=ne[0],ce=ne[1],ie=Object(c.useState)(!1),oe=Object(r.a)(ie,2),le=oe[0],se=oe[1],ue=Object(c.useState)(""),me=Object(r.a)(ue,2),fe=me[0],de=me[1],pe=Object(c.useState)(!1),be=Object(r.a)(pe,2),Oe=(be[0],be[1],Object(c.useState)("")),ge=Object(r.a)(Oe,2),Ee=(ge[0],ge[1],Object(c.useState)(!1)),je=Object(r.a)(Ee,2),he=(je[0],je[1],Object(c.useState)("")),Ce=Object(r.a)(he,2),ve=(Ce[0],Ce[1],Object(c.useState)(!1)),Se=Object(r.a)(ve,2),ye=(Se[0],Se[1],Object(c.useState)("")),xe=Object(r.a)(ye,2),Ae=(xe[0],xe[1],Object(c.useState)(!1)),ke=Object(r.a)(Ae,2),we=ke[0],Ne=ke[1],Fe=Object(c.useState)(""),We=Object(r.a)(Fe,2),_e=(We[0],We[1]),Ie=Object(c.useState)(new Date),Pe=Object(r.a)(Ie,2),Te=Pe[0],ze=Pe[1],Be=function(e){var t=void 0!==e?e:h;return null==t||""===t.toString().trim()?(se(!0),de("Este campo es requerido"),1):(se(!1),de(""),0)},Me=function(e){var t=void 0!==e?e:y;return null==t||""===t.toString().trim()?(te(!0),ce("Este campo es requerido"),1):(te(!1),ce(""),0)},De=function(e){var t=void 0!==e?e:$;return null==t||""===t.toString().trim()?(Ne(!0),_e("Este campo es requerido"),1):(Ne(!1),_e(""),0)},Re=function(){if(0===function(){var e=0;return e+=Be(),e+=Me()}()){var t={name:y,description:h,username:B,password:K,expirationDateMaintenance:Te,customer:O._id,maintenanceCost:parseFloat($)};e.centerOfAttention?(t.id=e.centerOfAttention._id,Object(I.Q)(t).then((function(t){"success"==t.status?(M.a.fire({icon:"success",title:"El centro de atenci\xf3n ".concat(y,"  fue actualizado exitosamente"),showConfirmButton:!1,timer:1500}),e.onClose(),e.passCenterOfAttentionEdit(t.centerOfAttention)):M.a.fire({icon:"error",title:"Ocurri\xf3 un error al actualizar el centro de atenci\xf3n ".concat(y),showConfirmButton:!1,timer:1500})}))):Object(I.c)(t).then((function(t){"success"==t.status?(M.a.fire({icon:"success",title:"El centro de atenci\xf3n ".concat(y,"  fue creado exitosamente"),showConfirmButton:!1,timer:1500}),e.onCloseModal(),e.passCreateCenterOfAttention(t.centerOfAttention)):M.a.fire({icon:"error",title:"Ocurri\xf3 un error al crear el centro de atenci\xf3n ".concat(y),showConfirmButton:!1,timer:1500})}))}else z.b.error("Faltan datos por llenar",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return i.a.createElement(c.Fragment,null,i.a.createElement(z.a,null),i.a.createElement(N.a,{maxWidth:"md"},i.a.createElement(d.a,{className:o.paper},i.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(e){e.preventDefault(),Re()}},i.a.createElement(w.a,{container:!0,spacing:3},i.a.createElement(w.a,{item:!0,xs:12,sm:12},i.a.createElement(_.a,{fullWidth:!0,size:"small",getOptionLabel:function(e){return"".concat(e.name.toString().toUpperCase()," ")},filterOptions:function(e){return e},options:u,autoComplete:!0,getOptionSelected:function(e,t){return e===t},onChange:function(e,t){g(t)},onInputChange:function(e,t){if(t.toString().trim().length>0){var a={search:t.toString().trim()};Object(I.v)(a).then((function(e){m(e.customers)}))}},renderInput:function(e){return i.a.createElement(W.a,Object.assign({},e,{label:"Cliente",variant:"outlined",margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,a){return i.a.createElement(P.a,Object.assign({label:e.name},t({index:a}),{disabled:-1!==u.indexOf(e)}))}))},renderOption:function(e){return i.a.createElement(w.a,{container:!0,alignItems:"center"},i.a.createElement(w.a,{item:!0,xs:!0},i.a.createElement(T.a,null,"".concat(e.name.toString().toUpperCase()))))}})),i.a.createElement(w.a,{item:!0,xs:12,sm:12},i.a.createElement(W.a,{fullWidth:!0,error:ee,helperText:re,margin:"dense",autoComplete:"off",className:Object(F.a)(o.margin,o.textField),variant:"outlined",label:"Nombre del centro de atenci\xf3n",value:y,onChange:function(e){x(e.target.value),Me(e.target.value)}})),i.a.createElement(w.a,{item:!0,xs:12,sm:12},i.a.createElement(W.a,{fullWidth:!0,error:le,helperText:fe,margin:"dense",autoComplete:"off",className:Object(F.a)(o.margin,o.textField),variant:"outlined",label:"Descripci\xf3n del centro de atenci\xf3n",value:h,onChange:function(e){C(e.target.value),Be(e.target.value)}})),i.a.createElement(w.a,{item:!0,xs:12,sm:6},i.a.createElement(R.a,{utils:D.a},i.a.createElement(U.a,{style:{width:"100%"},margin:"normal",label:"Vencimiento mantenimiento",format:"MM/dd/yyyy",value:Te,onChange:function(e){ze(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement(w.a,{item:!0,xs:12,sm:6},i.a.createElement(W.a,{fullWidth:!0,error:we,helperText:we,margin:"dense",autoComplete:"off",className:Object(F.a)(o.margin,o.textField),variant:"outlined",label:"Costo del mantenimiento",value:$,onChange:function(e){X(e.target.value),De(e.target.value)}})),i.a.createElement(w.a,{item:!0,xs:2,sm:3},i.a.createElement(p.a,{disabled:n,type:"submit",variant:"contained",color:"primary"},e.centerOfAttention?"Actualizar":"Guardar")))))))},J=a(122),K=a(559),V=a(953),H=a(1035),L=a(480),Q=a(481),$=a(566),X=a(565),Y=Object(o.a)((function(e){return{root:{flexGrow:1},iconWidth:{width:10},paper:{padding:e.spacing(2),marginTop:10},button:{margin:e.spacing(1)},input:{display:"none"},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},icon:{marginRight:e.spacing(1),color:"black"}}})),Z=i.a.forwardRef((function(e,t){return i.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))}));t.default=function(){var e=Y(),t=Object(c.useState)([]),a=Object(r.a)(t,2),o=a[0],b=a[1],g=Object(c.useState)(0),y=Object(r.a)(g,2),x=y[0],k=y[1],w=Object(c.useState)(10),N=Object(r.a)(w,2),F=N[0],W=N[1],_=Object(c.useState)(0),P=Object(r.a)(_,2),T=P[0],z=P[1],B=Object(c.useState)(!1),M=Object(r.a)(B,2),D=M[0],R=M[1],U=Object(c.useState)(!1),q=Object(r.a)(U,2),ee=q[0],te=q[1],ae=Object(c.useState)(!1),ne=Object(r.a)(ae,2),re=ne[0],ce=ne[1],ie=Object(c.useState)(!1),oe=Object(r.a)(ie,2),le=oe[0],se=oe[1],ue=Object(c.useState)(null),me=Object(r.a)(ue,2),fe=me[0],de=me[1],pe=Object(c.useState)(!1),be=Object(r.a)(pe,2),Oe=be[0],ge=be[1];Object(c.useEffect)((function(){var e={start:0,end:F};Object(I.u)(e).then((function(e){b(e.centersOfAttention),k(e.count)}))}),[]);var Ee=function(e){return function(){de(e),R(!0)}},je=function(e){return function(){de(e),te(!0)}},he=function(){R(!1)},Ce=function(){ce(!1)},ve=function(){te(!1)},Se=function(){se(!1)},ye=function(){ge(!1)},xe=function(e){return function(){de(e),ge(!0)}};return i.a.createElement(c.Fragment,null,i.a.createElement(d.a,{className:e.paper},i.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){se(!0)}},"Crear centro de atenci\xf3n"),i.a.createElement(l.a,null,i.a.createElement(m.a,null,i.a.createElement(f.a,null,i.a.createElement(u.a,null,"Nombre"),i.a.createElement(u.a,null,"Descripci\xf3n"),i.a.createElement(u.a,null,"Cliente"),i.a.createElement(u.a,{align:"right"},"Costo mantenimiento"),i.a.createElement(u.a,{colSpan:4},"Acciones"))),i.a.createElement(s.a,null,o.map((function(t){return i.a.createElement(f.a,{key:t._id},i.a.createElement(u.a,null,t.title," "),i.a.createElement(u.a,null,t.description," "),i.a.createElement(u.a,null,t.customer.name," "),i.a.createElement(u.a,{align:"right"},i.a.createElement(H.a,{value:t.maintenanceCost,displayType:"text",thousandSeparator:!0,prefix:"$"})),i.a.createElement(u.a,{className:e.iconWidth},t.administrative?"":i.a.createElement(K.a,{title:"Editar",placement:"top"},i.a.createElement(O.a,{className:e.icon,onClick:(a=t,function(){de(a),ce(!0)})}))),i.a.createElement(u.a,{className:e.iconWidth},i.a.createElement(K.a,{title:"Eliminar",placement:"top"},"active"===t.status?i.a.createElement(E.a,{className:e.icon,onClick:Ee(t)}):i.a.createElement(A.a,{className:e.icon,onClick:je(t)}))),i.a.createElement(u.a,{className:e.iconWidth},i.a.createElement(K.a,{title:"Usuarios",placement:"top"},i.a.createElement(J.f,{className:"icon",onClick:xe(t)}))));var a})))),i.a.createElement(V.a,{rowsPerPageOptions:[10,25,100],component:"div",count:x,rowsPerPage:F,page:T,onChangePage:function(e,t){z(t);var a={start:t*F,end:F};Object(I.u)(a).then((function(e){b(e.centersOfAttention),k(e.count)}))},onChangeRowsPerPage:function(e){W(+e.target.value),z(0);var t={start:0,end:e.target.value};Object(I.u)(t).then((function(e){b(e.centersOfAttention),k(e.count)}))}})),i.a.createElement(j.a,{open:D,onClose:he,"aria-labelledby":"draggable-dialog-title"},i.a.createElement(S.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),i.a.createElement(C.a,null,i.a.createElement(v.a,null,"Esta seguro de desabilitar este centro de atenci\xf3n")),i.a.createElement(h.a,null,i.a.createElement(p.a,{autoFocus:!0,onClick:he,color:"primary"},"NO"),i.a.createElement(p.a,{onClick:function(){R(!1),Object(I.i)(fe._id).then((function(e){if("success"===e.status){var t=o.map((function(e){return fe._id!==e._id||(e.status="inactive"),e}));b(t)}}))},color:"primary"},"SI"))),i.a.createElement(j.a,{open:ee,onClose:ve},i.a.createElement(S.a,{style:{cursor:"move"}},"Alerta"),i.a.createElement(C.a,null,i.a.createElement(v.a,null,"Esta seguro de reactivar a este centro de atenci\xf3n?")),i.a.createElement(h.a,null,i.a.createElement(p.a,{autoFocus:!0,onClick:ve,color:"primary"},"NO"),i.a.createElement(p.a,{onClick:function(){te(!1),Object(I.K)(fe._id).then((function(e){if("success"===e.status){var t=o.map((function(e,t){return fe._id!==e._id||(e.status="active"),e}));b(t)}}))},color:"primary"},"SI"))),i.a.createElement(j.a,{maxWidth:"md",open:re,onCloseEditCenterOfAttention:Ce,TransitionComponent:Z},i.a.createElement(C.a,null,i.a.createElement(G,{onClose:Ce,centerOfAttention:fe,passCenterOfAttentionEdit:function(e){ce(!1);var t=o.map((function(t){return e._id!==t._id?t:t=e}));b(t)}})),i.a.createElement(h.a,null,i.a.createElement(p.a,{autoFocus:!0,onClick:Ce,color:"primary"},"Cerrar"))),i.a.createElement(j.a,{open:le,onClose:Se,"aria-labelledby":"form-dialog-title"},i.a.createElement(S.a,null,"Crear centro de atenci\xf3n"),i.a.createElement(C.a,null,i.a.createElement(G,{onCloseModal:function(){se(!1)},passCreateCenterOfAttention:function(e){b((function(t){return[].concat(Object(n.a)(t),[e])})),se(!1)}})),i.a.createElement(h.a,null,i.a.createElement(p.a,{onClick:Se,color:"primary"},"Cerrar"))),i.a.createElement(j.a,{open:Oe,onClose:ye},i.a.createElement(S.a,null,"Usuarios"),i.a.createElement(C.a,null,i.a.createElement(v.a,null,i.a.createElement(L.a,{className:e.root},fe?fe.users.map((function(e){return i.a.createElement(Q.a,{alignItems:"flex-start"},i.a.createElement(X.a,null,i.a.createElement(J.e,{style:{fontSize:32,color:"grey"}})),i.a.createElement($.a,{primary:e.name,secondary:e.role.name}))})):""))),i.a.createElement(h.a,null,i.a.createElement(p.a,{autoFocus:!0,onClick:ye,color:"primary"},"Cerrar"))))}}}]);
//# sourceMappingURL=18.4d779e3c.chunk.js.map