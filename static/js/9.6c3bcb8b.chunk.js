(this.webpackJsonpati=this.webpackJsonpati||[]).push([[9],{1e3:function(t,e){t.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];if(!e)return null;if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},1001:function(t,e){t.exports=function(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])}},1002:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}},1035:function(t,e,n){},1036:function(t,e,n){var o=n(1037),r=n(1055),i=n(1076),a=n(951);t.exports=function(t){!function(t,e){var n={options:t=r(t)};e=i(n,e),n.api=e;var s=o(n);e.onAdd=s.onAdd,e.onRemove=s.onRemove,e.types=a.types,e.options=t}(t,this)},t.exports.modes=n(996)},1037:function(t,e,n){var o=n(1038),r=n(1050),i=n(1054),a=n(951),s=n(61);t.exports=function(t){var e=null,n=null,c={onRemove:function(){return t.map.off("load",c.connect),clearInterval(n),c.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect:function(){t.map.off("load",c.connect),clearInterval(n),c.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(a){var u=a.fire;return a.fire=function(t,e){var n=arguments;return 1===u.length&&1!==arguments.length&&(n=[s({},{type:t},e)]),u.apply(a,n)},t.map=a,t.events=o(t),t.ui=i(t),t.container=a.getContainer(),t.store=new r(t),e=t.ui.addButtons(),t.options.boxSelect&&(a.boxZoom.disable(),a.dragPan.disable(),a.dragPan.enable()),a.loaded()?c.connect():(a.on("load",c.connect),n=setInterval((function(){a.loaded()&&c.connect()}),16)),t.events.start(),e},addLayers:function(){t.map.addSource(a.sources.COLD,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(a.sources.HOT,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(a.sources.COLD)&&t.map.removeSource(a.sources.COLD),t.map.getSource(a.sources.HOT)&&t.map.removeSource(a.sources.HOT)}};return t.setup=c,c}},1038:function(t,e,n){var o=n(1039),r=n(1040),i=n(965),a=n(1045),s=n(1046),c=n(951),u=n(1047);t.exports=function(t){var e=Object.keys(t.options.modes).reduce((function(e,n){return e[n]=u(t.options.modes[n]),e}),{}),n={},l={},p={},d=null,h=null;p.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:c.cursors.DRAG}),h.drag(e)):e.originalEvent.stopPropagation()},p.mousedrag=function(t){p.drag(t,(function(t){return!a(n,t)}))},p.touchdrag=function(t){p.drag(t,(function(t){return!s(l,t)}))},p.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return p.mousedrag(e);var n=r(e,t);e.featureTarget=n,h.mousemove(e)},p.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};var o=r(e,t);e.featureTarget=o,h.mousedown(e)},p.mouseup=function(e){var o=r(e,t);e.featureTarget=o,a(n,{point:e.point,time:(new Date).getTime()})?h.click(e):h.mouseup(e)},p.mouseout=function(t){h.mouseout(t)},p.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){l={time:(new Date).getTime(),point:e.point};var n=i.touch(e,null,t)[0];e.featureTarget=n,h.touchstart(e)}},p.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return h.touchmove(e),p.touchdrag(e)},p.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var n=i.touch(e,null,t)[0];e.featureTarget=n,s(l,{time:(new Date).getTime(),point:e.point})?h.tap(e):h.touchend(e)}};var f=function(t){return!(8===t||46===t||t>=48&&t<=57)};function g(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h.stop();var a=e[n];if(void 0===a)throw new Error("".concat(n," is not valid"));d=n;var s=a(t,r);h=o(s,t),i.silent||t.map.fire(c.events.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}p.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?f(e.keyCode)?h.keydown(e):49===e.keyCode&&t.options.controls.point?g(c.modes.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?g(c.modes.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&g(c.modes.DRAW_POLYGON):(e.preventDefault(),h.trash()))},p.keyup=function(t){f(t.keyCode)&&h.keyup(t)},p.zoomend=function(){t.store.changeZoom()},p.data=function(e){if("style"===e.dataType){var n=t.setup,o=t.map,r=t.options,i=t.store;r.styles.some((function(t){return o.getLayer(t.id)}))||(n.addLayers(),i.setDirty(),i.render())}};var m={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){d=t.options.defaultMode,h=o(e[d](t),t)},changeMode:g,actionable:function(e){var n=!1;Object.keys(e).forEach((function(t){if(void 0===m[t])throw new Error("Invalid action type");m[t]!==e[t]&&(n=!0),m[t]=e[t]})),n&&t.map.fire(c.events.ACTIONABLE,{actions:m})},currentModeName:function(){return d},currentModeRender:function(t,e){return h.render(t,e)},fire:function(t,e){p[t]&&p[t](e)},addEventListeners:function(){t.map.on("mousemove",p.mousemove),t.map.on("mousedown",p.mousedown),t.map.on("mouseup",p.mouseup),t.map.on("data",p.data),t.map.on("touchmove",p.touchmove),t.map.on("touchstart",p.touchstart),t.map.on("touchend",p.touchend),t.container.addEventListener("mouseout",p.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",p.keydown),t.container.addEventListener("keyup",p.keyup))},removeEventListeners:function(){t.map.off("mousemove",p.mousemove),t.map.off("mousedown",p.mousedown),t.map.off("mouseup",p.mouseup),t.map.off("data",p.data),t.map.off("touchmove",p.touchmove),t.map.off("touchstart",p.touchstart),t.map.off("touchend",p.touchend),t.container.removeEventListener("mouseout",p.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",p.keydown),t.container.removeEventListener("keyup",p.keyup))},trash:function(t){h.trash(t)},combineFeatures:function(){h.combineFeatures()},uncombineFeatures:function(){h.uncombineFeatures()},getMode:function(){return d}}}},1039:function(t,e){t.exports=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},o={on:function(t,e,o){if(void 0===n[t])throw new Error("Invalid event type: ".concat(t));n[t].push({selector:e,fn:o})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){for(var i=n[t],a=i.length;a--;){var s=i[a];if(s.selector(r)){s.fn.call(o,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(o),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)},touchstart:function(t){r("touchstart",t)},touchmove:function(t){r("touchmove",t)},touchend:function(t){r("touchend",t)},tap:function(t){r("tap",t)}}}},1040:function(t,e,n){var o=n(965),r=n(951);t.exports=function(t,e){var n=o.click(t,null,e),i={mouse:r.cursors.NONE};return n[0]&&(i.mouse=n[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,i.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(i.mouse=r.cursors.ADD),e.ui.queueMapClasses(i),e.ui.updateMapClasses(),n[0]}},1041:function(t,e,n){var o=n(1042),r=n(951),i={Point:0,LineString:1,Polygon:2};function a(t,e){var n=i[t.geometry.type]-i[e.geometry.type];return 0===n&&t.geometry.type===r.geojsonTypes.POLYGON?t.area-e.area:n}t.exports=function(t){return t.map((function(t){return t.geometry.type===r.geojsonTypes.POLYGON&&(t.area=o.geometry({type:r.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t})).sort(a).map((function(t){return delete t.area,t}))}},1042:function(t,e,n){var o=n(1043);function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e,n,r,i,s,c,u=0,l=t.length;if(l>2){for(c=0;c<l;c++)c===l-2?(r=l-2,i=l-1,s=0):c===l-1?(r=l-1,i=0,s=1):(r=c,i=c+1,s=c+2),e=t[r],n=t[i],u+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]));u=u*o.RADIUS*o.RADIUS/2}return u}function a(t){return t*Math.PI/180}t.exports.geometry=function t(e){var n,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)o+=r(e.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)o+=t(e.geometries[n]);return o}},t.exports.ring=i},1043:function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},1044:function(t,e){t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}},1045:function(t,e,n){var o=n(995);t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,a=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var s=o(t.point,e.point);return s<r||s<i&&e.time-t.time<a}},1046:function(t,e,n){var o=n(995);t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;t.point=t.point||e.point,t.time=t.time||e.time;var a=o(t.point,e.point);return a<r&&e.time-t.time<i}},1047:function(t,e,n){var o=n(1048),r={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},i=Object.keys(r);t.exports=function(t){var e=Object.keys(t);return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},c=e.reduce((function(e,n){return e[n]=t[n],e}),new o(n));function u(t){return function(e){c[t](s,e)}}return{start:function(){var e=this;s=c.onSetup(a),i.forEach((function(n){var o=r[n],i=function(){return!1};t[o]&&(i=function(){return!0}),e.on(n,i,u(o))}))},stop:function(){c.onStop(s)},trash:function(){c.onTrash(s)},combineFeatures:function(){c.onCombineFeatures(s)},uncombineFeatures:function(){c.onUncombineFeatures(s)},render:function(t,e){c.toDisplayFeatures(s,t,e)}}}}},1048:function(t,e,n){var o=t.exports=n(1049);o.prototype.onSetup=function(){},o.prototype.onDrag=function(){},o.prototype.onClick=function(){},o.prototype.onMouseMove=function(){},o.prototype.onMouseDown=function(){},o.prototype.onMouseUp=function(){},o.prototype.onMouseOut=function(){},o.prototype.onKeyUp=function(){},o.prototype.onKeyDown=function(){},o.prototype.onTouchStart=function(){},o.prototype.onTouchMove=function(){},o.prototype.onTouchEnd=function(){},o.prototype.onTap=function(){},o.prototype.onStop=function(){},o.prototype.onTrash=function(){},o.prototype.onCombineFeature=function(){},o.prototype.onUncombineFeature=function(){},o.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},1049:function(t,e,n){var o=n(951),r=n(965),i=n(976),a=n(978),s=n(979),c=n(968),u=t.exports=function(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t};u.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},u.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce((function(t,n){return void 0===t[n.feature_id]&&(t[n.feature_id]=!0,e._ctx.store.get(n.feature_id).changed()),t}),{})},u.prototype.getSelected=function(){return this._ctx.store.getSelected()},u.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},u.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},u.prototype.getFeature=function(t){return this._ctx.store.get(t)},u.prototype.select=function(t){return this._ctx.store.select(t)},u.prototype.deselect=function(t){return this._ctx.store.deselect(t)},u.prototype.deleteFeature=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(t,e)},u.prototype.addFeature=function(t){return this._ctx.store.add(t)},u.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},u.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},u.prototype.setActionableState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},u.prototype.changeMode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(t,e,n)},u.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},u.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},u.prototype.featuresAt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return r[n](t,e,this._ctx)},u.prototype.newFeature=function(t){var e=t.geometry.type;return e===o.geojsonTypes.POINT?new i(this._ctx,t):e===o.geojsonTypes.LINE_STRING?new a(this._ctx,t):e===o.geojsonTypes.POLYGON?new s(this._ctx,t):new c(this._ctx,t)},u.prototype.isInstanceOf=function(t,e){if(t===o.geojsonTypes.POINT)return e instanceof i;if(t===o.geojsonTypes.LINE_STRING)return e instanceof a;if(t===o.geojsonTypes.POLYGON)return e instanceof s;if("MultiFeature"===t)return e instanceof c;throw new Error("Unknown feature class: ".concat(t))},u.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)}},1050:function(t,e,n){var o=n(1051),r=n(1052),i=n(966),a=n(1053),s=n(951).interactions,c=t.exports=function(t){this._features={},this._featureIds=new i,this._selectedFeatureIds=new i,this._selectedCoordinates=[],this._changedFeatureIds=new i,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=o(a,16,this),this.isDirty=!1};function u(t){var e=this,n=this._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));this._selectedCoordinates.length===n.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=n}c.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},c.prototype.setDirty=function(){return this.isDirty=!0,this},c.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},c.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},c.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},c.prototype.getAllIds=function(){return this._featureIds.values()},c.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},c.prototype.delete=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach((function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||-1===e._deletedFeaturesToEmit.indexOf(e._features[t])&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)})),u.call(this,n),this},c.prototype.get=function(t){return this._features[t]},c.prototype.getAll=function(){var t=this;return Object.keys(this._features).map((function(e){return t._features[e]}))},c.prototype.select=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach((function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))})),this},c.prototype.deselect=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach((function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))})),u.call(this,n),this},c.prototype.clearSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},c.prototype.setSelected=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=r(t),this.deselect(this._selectedFeatureIds.values().filter((function(e){return-1===t.indexOf(e)})),{silent:n.silent}),this.select(t.filter((function(t){return!e._selectedFeatureIds.has(t)})),{silent:n.silent}),this},c.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},c.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},c.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},c.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map((function(e){return t.get(e)}))},c.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map((function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}}))},c.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},c.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},c.prototype.storeMapConfig=function(){var t=this;s.forEach((function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())}))},c.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach((function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()}))},c.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]}},1051:function(t,e){t.exports=function(t,e,n){var o,r;function i(){o=!1,r&&(a.apply(n,r),r=!1)}function a(){o?r=arguments:(o=!0,t.apply(n,arguments),setTimeout(i,e))}return a}},1052:function(t,e){t.exports=function(t){return[].concat(t).filter((function(t){return void 0!==t}))}},1053:function(t,e,n){var o=n(951);t.exports=function(){var t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(o.sources.HOT)))return u();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var n=[],r=[];t.isDirty?r=t.getAllIds():(n=t.getChangedIds().filter((function(e){return void 0!==t.get(e)})),r=t.sources.hot.filter((function(e){return e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)})).map((function(t){return t.properties.id}))),t.sources.hot=[];var i=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((function(t){var e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)}));var a=i!==t.sources.cold.length||r.length>0;function s(n,o){var r=t.get(n).internal(e);t.ctx.events.currentModeRender(r,(function(e){t.sources[o].push(e)}))}if(n.forEach((function(t){return s(t,"hot")})),r.forEach((function(t){return s(t,"cold")})),a&&t.ctx.map.getSource(o.sources.COLD).setData({type:o.geojsonTypes.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(o.sources.HOT).setData({type:o.geojsonTypes.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(o.events.SELECTION_CHANGE,{features:t.getSelected().map((function(t){return t.toGeoJSON()})),points:t.getSelectedCoordinates().map((function(t){return{type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POINT,coordinates:t.coordinates}}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var c=t._deletedFeaturesToEmit.map((function(t){return t.toGeoJSON()}));t._deletedFeaturesToEmit=[],t.ctx.map.fire(o.events.DELETE,{features:c})}function u(){t.isDirty=!1,t.clearChangedIds()}u(),t.ctx.map.fire(o.events.RENDER,{})}},1054:function(t,e,n){var o=n(61),r=n(951),i=["mode","feature","mouse"];t.exports=function(t){var e={},n=null,a={mode:null,feature:null,mouse:null},s={mode:null,feature:null,mouse:null};function c(t){s=o(s,t)}function u(){if(t.container){var e=[],n=[];i.forEach((function(t){s[t]!==a[t]&&(e.push("".concat(t,"-").concat(a[t])),null!==s[t]&&n.push("".concat(t,"-").concat(s[t])))})),e.length>0&&t.container.classList.remove.apply(t.container.classList,e),n.length>0&&t.container.classList.add.apply(t.container.classList,n),a=o(a,s)}}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=document.createElement("button");return o.className="".concat(r.classes.CONTROL_BUTTON," ").concat(e.className),o.setAttribute("title",e.title),e.container.appendChild(o),o.addEventListener("click",(function(o){o.preventDefault(),o.stopPropagation(),o.target!==n?(d(t),e.onActivate()):p()}),!0),o}function p(){n&&(n.classList.remove(r.classes.ACTIVE_BUTTON),n=null)}function d(t){p();var o=e[t];o&&o&&"trash"!==t&&(o.classList.add(r.classes.ACTIVE_BUTTON),n=o)}return{setActiveButton:d,queueMapClasses:c,updateMapClasses:u,clearMapClasses:function(){c({mode:null,feature:null,mouse:null}),u()},addButtons:function(){var n=t.options.controls,o=document.createElement("div");return o.className="".concat(r.classes.CONTROL_GROUP," ").concat(r.classes.CONTROL_BASE),n?(n[r.types.LINE]&&(e[r.types.LINE]=l(r.types.LINE,{container:o,className:r.classes.CONTROL_BUTTON_LINE,title:"LineString tool ".concat(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_LINE_STRING)}})),n[r.types.POLYGON]&&(e[r.types.POLYGON]=l(r.types.POLYGON,{container:o,className:r.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool ".concat(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POLYGON)}})),n[r.types.POINT]&&(e[r.types.POINT]=l(r.types.POINT,{container:o,className:r.classes.CONTROL_BUTTON_POINT,title:"Marker tool ".concat(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POINT)}})),n.trash&&(e.trash=l("trash",{container:o,className:r.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),n.combine_features&&(e.combine_features=l("combineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=l("uncombineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),o):o},removeButtons:function(){Object.keys(e).forEach((function(t){var n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]}))}}}},1055:function(t,e,n){var o=n(61),r=n(951),i={defaultMode:r.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:n(1056),modes:n(996),controls:{},userProperties:!1},a={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},s={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function c(t,e){return t.map((function(t){return t.source?t:o(t,{id:"".concat(t.id,".").concat(e),source:"hot"===e?r.sources.HOT:r.sources.COLD})}))}t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=o(s,t.controls):e.controls=o(a,t.controls),(e=o(i,e)).styles=c(e.styles,"cold").concat(c(e.styles,"hot")),e}},1056:function(t,e){t.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},1057:function(t,e,n){var o=n(958),r=n(1058),i=n(997),a=n(966),s=n(969),c=n(998),u=n(951),l={onSetup:function(t){var e=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(u.events.UPDATE,{action:u.updateActions.MOVE,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),n=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),o=!1;if(e.length>1){o=!0;var r=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==r&&(o=!1)}))}var i=n.length>0,a=e.length>0;this.setActionableState({combineFeatures:o,uncombineFeatures:i,trash:a})},getUniqueIds:function(t){return t.length?t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new a).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){s.enable(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};l.onTap=l.onClick=function(t,e){return o.noTarget(e)?this.clickAnywhere(t,e):o.isOfMetaType(u.meta.VERTEX)(e)?this.clickOnVertex(t,e):o.isFeature(e)?this.clickOnFeature(t,e):void 0},l.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(t){return e.doRender(t)}))),s.enable(this),this.stopExtendedInteractions(t)},l.clickOnVertex=function(t,e){this.changeMode(u.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:u.cursors.MOVE})},l.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},l.clickOnFeature=function(t,e){var n=this;s.disable(this),this.stopExtendedInteractions(t);var r=o.isShiftDown(e),i=this.getSelectedIds(),a=e.featureTarget.properties.id,c=this.isSelected(a);if(!r&&c&&this.getFeature(a).type!==u.geojsonTypes.POINT)return this.changeMode(u.modes.DIRECT_SELECT,{featureId:a});c&&r?(this.deselect(a),this.updateUIClasses({mouse:u.cursors.POINTER}),1===i.length&&s.enable(this)):!c&&r?(this.select(a),this.updateUIClasses({mouse:u.cursors.MOVE})):c||r||(i.forEach((function(t){return n.doRender(t)})),this.setSelected(a),this.updateUIClasses({mouse:u.cursors.MOVE})),this.doRender(a)},l.onMouseDown=function(t,e){return o.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&o.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},l.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=r(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},l.onTouchStart=function(t,e){if(o.isActiveFeature(e))return this.startOnActiveFeature(t,e)},l.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},l.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:u.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(u.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var n=r(e.originalEvent,this.map.getContainer()),o=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),a=Math.min(t.boxSelectStartLocation.y,n.y),s=Math.max(t.boxSelectStartLocation.y,n.y),c="translate(".concat(o,"px, ").concat(a,"px)");t.boxSelectElement.style.transform=c,t.boxSelectElement.style.WebkitTransform=c,t.boxSelectElement.style.width="".concat(i-o,"px"),t.boxSelectElement.style.height="".concat(s-a,"px")},l.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};c(this.getSelected(),n),t.dragMoveLocation=e.lngLat},l.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var o=[t.boxSelectStartLocation,r(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,o,"click"),a=this.getUniqueIds(i).filter((function(t){return!n.isSelected(t)}));a.length&&(this.select(a),a.forEach((function(t){return n.doRender(t)})),this.updateUIClasses({mouse:u.cursors.MOVE}))}this.stopExtendedInteractions(t)},l.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?u.activeStates.ACTIVE:u.activeStates.INACTIVE,n(e),this.fireActionable(),e.properties.active===u.activeStates.ACTIVE&&e.geometry.type!==u.geojsonTypes.POINT&&i(e).forEach(n)},l.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},l.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],o=t[0].type.replace("Multi",""),r=0;r<t.length;r++){var i=t[r];if(i.type.replace("Multi","")!==o)return;i.type.includes("Multi")?i.getCoordinates().forEach((function(t){e.push(t)})):e.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:u.geojsonTypes.FEATURE,properties:n[0].properties,geometry:{type:"Multi".concat(o),coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(u.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},l.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var n=[],o=[],r=function(r){var i=e[r];t.isInstanceOf("MultiFeature",i)&&(i.getFeatures().forEach((function(e){t.addFeature(e),e.properties=i.properties,n.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(i.id,{silent:!0}),o.push(i.toGeoJSON()))},i=0;i<e.length;i++)r(i);n.length>1&&this.map.fire(u.events.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:o}),this.fireActionable()}},t.exports=l},1058:function(t,e,n){var o=n(1059);t.exports=function(t,e){var n=e.getBoundingClientRect();return new o(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}},1059:function(t,e,n){"use strict";function o(t,e){this.x=t,this.y=e}t.exports=o,o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=o,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),o=Math.sin(t),r=e.x+n*(this.x-e.x)-o*(this.y-e.y),i=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t}},1060:function(t,e,n){var o=n(951);t.exports=function(t,e,n,r){var i=e.geometry.coordinates,a=n.geometry.coordinates;if(i[1]>o.LAT_RENDERED_MAX||i[1]<o.LAT_RENDERED_MIN||a[1]>o.LAT_RENDERED_MAX||a[1]<o.LAT_RENDERED_MIN)return null;var s=r.project([i[0],i[1]]),c=r.project([a[0],a[1]]),u=r.unproject([(s.x+c.x)/2,(s.y+c.y)/2]);return{type:o.geojsonTypes.FEATURE,properties:{meta:o.meta.MIDPOINT,parent:t,lng:u.lng,lat:u.lat,coord_path:n.properties.coord_path},geometry:{type:o.geojsonTypes.POINT,coordinates:[u.lng,u.lat]}}}},1061:function(t,e,n){var o=n(1062),r=n(1065),i=n(1066),a={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},s=Object.keys(a);function c(t){for(var e=i(),n=o(t),r=0;r<n.length;r++)e.include(n[r]);return e}t.exports=function(t){return c(t).bbox()},t.exports.polygon=function(t){return c(t).polygon()},t.exports.bboxify=function(t){return r(t).map((function(t){t&&(s.some((function(e){return!!t[e]&&-1!==a[e].indexOf(t.type)}))&&(t.bbox=c(t).bbox(),this.update(t)))}))}},1062:function(t,e,n){var o=n(1e3),r=n(1063),i=n(1064);t.exports=function(t){if(!t)return[];var e=r(o(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(i(t.geometry.coordinates)))})),n}},1063:function(t,e){t.exports=function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,n){return e.concat(t(n))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):e;case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}},1064:function(t,e){t.exports=function(t){return function t(e){if(Array.isArray(e)&&e.length&&"number"===typeof e[0])return[e];return e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t)}},1065:function(t,e){var n=t.exports=function(t){return new o(t)};function o(t){this.value=t}function r(t,e,n){var o=[],r=[],s=!0;return function t(p){var d=n?i(p):p,h={},f=!0,g={node:d,node_:p,path:[].concat(o),parent:r[r.length-1],parents:r,key:o.slice(-1)[0],isRoot:0===o.length,level:o.length,circular:null,update:function(t,e){g.isRoot||(g.parent.node[g.key]=t),g.node=t,e&&(f=!1)},delete:function(t){delete g.parent.node[g.key],t&&(f=!1)},remove:function(t){c(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],t&&(f=!1)},keys:null,before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){s=!1},block:function(){f=!1}};if(!s)return g;function m(){if("object"===typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=a(g.node)),g.isLeaf=0==g.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===p){g.circular=r[t];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}m();var y=e.call(g,g.node);return void 0!==y&&g.update&&g.update(y),h.before&&h.before.call(g,g.node),f?("object"!=typeof g.node||null===g.node||g.circular||(r.push(g),m(),u(g.keys,(function(e,r){o.push(e),h.pre&&h.pre.call(g,g.node[e],e);var i=t(g.node[e]);n&&l.call(g.node,e)&&(g.node[e]=i.node),i.isLast=r==g.keys.length-1,i.isFirst=0==r,h.post&&h.post.call(g,i),o.pop()})),r.pop()),h.after&&h.after.call(g,g.node),g):g}(t).node}function i(t){if("object"===typeof t&&null!==t){var e;if(c(t))e=[];else if("[object Date]"===s(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===s(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===s(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===s(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===s(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===s(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},o=function(){};o.prototype=n,e=new o}return u(a(t),(function(n){e[n]=t[n]})),e}return t}o.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!l.call(e,o)){e=void 0;break}e=e[o]}return e},o.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!l.call(e,o))return!1;e=e[o]}return!0},o.prototype.set=function(t,e){for(var n=this.value,o=0;o<t.length-1;o++){var r=t[o];l.call(n,r)||(n[r]={}),n=n[r]}return n[t[o]]=e,e},o.prototype.map=function(t){return r(this.value,t,!0)},o.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},o.prototype.reduce=function(t,e){var n=1===arguments.length,o=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(o=t.call(this,o,e))})),o},o.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},o.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},o.prototype.clone=function(){var t=[],e=[];return function n(o){for(var r=0;r<t.length;r++)if(t[r]===o)return e[r];if("object"===typeof o&&null!==o){var s=i(o);return t.push(o),e.push(s),u(a(o),(function(t){s[t]=n(o[t])})),t.pop(),e.pop(),s}return o}(this.value)};var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function s(t){return Object.prototype.toString.call(t)}var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};u(a(o.prototype),(function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new o(e);return r[t].apply(r,n)}}));var l=Object.hasOwnProperty||function(t,e){return e in t}},1066:function(t,e){function n(t){if(!(this instanceof n))return new n(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}t.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.equals=function(t){var e;return e=t instanceof n?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},n.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof n?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},n.prototype.intersect=function(t){return this._valid?(e=t instanceof n?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},1067:function(t,e,n){var o=n(958),r=o.noTarget,i=o.isOfMetaType,a=o.isInactiveFeature,s=o.isShiftDown,c=n(997),u=n(999),l=n(969),p=n(951),d=n(958),h=n(998),f=i(p.meta.VERTEX),g=i(p.meta.MIDPOINT),m={fireUpdate:function(){this.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_COORDINATES,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,o=t.selectedCoordPaths.indexOf(n.coord_path);s(e)||-1!==o?s(e)&&-1===o&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){h(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){for(var o=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),r=o.map((function(t){return{type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.POINT,coordinates:t}}})),i=u(r,n),a=0;a<o.length;a++){var s=o[a];t.feature.updateCoordinate(t.selectedCoordPaths[a],s[0]+i.lng,s[1]+i.lat)}},clickNoTarget:function(){this.changeMode(p.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(p.modes.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===p.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var o={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,o.selectedCoordPaths)),this.setSelected(e),l.disable(this),this.setActionableState({trash:!0}),o},onStop:function(){l.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=p.activeStates.ACTIVE,n(e),c(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=p.activeStates.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort().reverse().forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(p.modes.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=d.isActiveFeature(e),o=f(e),r=0===t.selectedCoordPaths.length;n&&r||o&&!r?this.updateUIClasses({mouse:p.cursors.MOVE}):this.updateUIClasses({mouse:p.cursors.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};m.onTouchStart=m.onMouseDown=function(t,e){return f(e)?this.onVertex(t,e):d.isActiveFeature(e)?this.onFeature(t,e):g(e)?this.onMidpoint(t,e):void 0},m.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},m.onClick=function(t,e){return r(e)?this.clickNoTarget(t,e):d.isActiveFeature(e)?this.clickActiveFeature(t,e):a(e)?this.clickInactive(t,e):void this.stopDragging(t)},m.onTap=function(t,e){return r(e)?this.clickNoTarget(t,e):d.isActiveFeature(e)?this.clickActiveFeature(t,e):a(e)?this.clickInactive(t,e):void 0},m.onTouchEnd=m.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)},t.exports=m},1068:function(t,e,n){var o=n(958),r=n(951),i={onSetup:function(){var t=this.newFeature({type:r.geojsonTypes.FEATURE,properties:{},geometry:{type:r.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:r.cursors.ADD}),this.activateUIButton(r.types.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(r.modes.SIMPLE_SELECT)}};i.onTap=i.onClick=function(t,e){this.updateUIClasses({mouse:r.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(r.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(r.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},i.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},i.toDisplayFeatures=function(t,e,n){var o=e.properties.id===t.point.id;if(e.properties.active=o?r.activeStates.ACTIVE:r.activeStates.INACTIVE,!o)return n(e)},i.onTrash=i.stopDrawingAndRemove,i.onKeyUp=function(t,e){if(o.isEscapeKey(e)||o.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},t.exports=i},1069:function(t,e,n){var o=n(958),r=n(969),i=n(951),a=n(1001),s=n(980),c={onSetup:function(){var t=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),r.disable(this),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&a(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:i.cursors.ADD}),t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),o.isVertex(e)&&this.updateUIClasses({mouse:i.cursors.POINTER})}};c.onTap=c.onClick=function(t,e){return o.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},c.onKeyUp=function(t,e){o.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)):o.isEnterKey(e)&&this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},c.onStop=function(t){this.updateUIClasses({mouse:i.cursors.NONE}),r.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0.".concat(t.currentVertexPosition)),t.polygon.isValid()?this.map.fire(i.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT,{},{silent:!0})))},c.toDisplayFeatures=function(t,e,n){var o=e.properties.id===t.polygon.id;if(e.properties.active=o?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!o)return n(e);if(0!==e.geometry.coordinates.length){var r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=i.meta.FEATURE,n(s(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){var a=e.geometry.coordinates[0].length-3;n(s(t.polygon.id,e.geometry.coordinates[0][a],"0.".concat(a),!1))}if(r<=4){var c=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:c,type:i.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}}},c.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)},t.exports=c},1070:function(t,e,n){var o=n(1071),r=n(958),i=n(1001),a=n(969),s=n(951),c=n(980),u={onSetup:function(t){var e,n,r=(t=t||{}).featureId,i="forward";if(r){if(!(e=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var c=t.from;if(c&&"Feature"===c.type&&c.geometry&&"Point"===c.geometry.type&&(c=c.geometry),c&&"Point"===c.type&&c.coordinates&&2===c.coordinates.length&&(c=c.coordinates),!c||!Array.isArray(c))throw new Error("Please use the `from` property to indicate which point to continue the line from");var u=e.coordinates.length-1;if(e.coordinates[u][0]===c[0]&&e.coordinates[u][1]===c[1]){var l;n=u+1,(l=e).addCoordinate.apply(l,[n].concat(o(e.coordinates[u])))}else{if(e.coordinates[0][0]!==c[0]||e.coordinates[0][1]!==c[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var p;i="backwards",n=0,(p=e).addCoordinate.apply(p,[n].concat(o(e.coordinates[0])))}}else e=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(e);return this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:n,direction:i}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&i(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&i(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})}};u.onTap=u.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},u.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT))},u.onStop=function(t){a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate("".concat(t.currentVertexPosition)),t.line.isValid()?this.map.fire(s.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},u.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},u.toDisplayFeatures=function(t,e,n){var o=e.properties.id===t.line.id;if(e.properties.active=o?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!o)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=s.meta.FEATURE,n(c(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],"".concat("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))},t.exports=u},1071:function(t,e,n){var o=n(1072),r=n(1073),i=n(1074),a=n(1075);t.exports=function(t){return o(t)||r(t)||i(t)||a()}},1072:function(t,e,n){var o=n(1002);t.exports=function(t){if(Array.isArray(t))return o(t)}},1073:function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},1074:function(t,e,n){var o=n(1002);t.exports=function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}},1075:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},1076:function(t,e,n){var o=n(1077),r=n(1e3),i=n(977),a=n(965),s=n(1078),c=n(1079),u=n(951),l=n(966),p={Polygon:n(979),LineString:n(978),Point:n(976),MultiPolygon:n(968),MultiLineString:n(968),MultiPoint:n(968)};t.exports=function(t,e){return e.modes=u.modes,e.getFeatureIdsAt=function(e){return a.click({point:e},null,t).map((function(t){return t.properties.id}))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedIds().map((function(e){return t.store.get(e)})).map((function(t){return t.toGeoJSON()}))}},e.getSelectedPoints=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map((function(t){return{type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POINT,coordinates:t.coordinates}}}))}},e.set=function(n){if(void 0===n.type||n.type!==u.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var o=t.store.createRenderBatch(),r=t.store.getAllIds().slice(),i=e.add(n),a=new l(i);return(r=r.filter((function(t){return!a.has(t)}))).length&&e.delete(r),o(),i},e.add=function(e){var n=c.hint(e,{precisionWarning:!1}).filter((function(t){return"message"!==t.level}));if(n.length)throw new Error(n[0].message);var a=JSON.parse(JSON.stringify(r(e))).features.map((function(e){if(e.id=e.id||i(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=p[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: ".concat(e.geometry.type,"."));var r=new n(t,e);t.store.add(r)}else{var a=t.store.get(e.id);a.properties=e.properties,o(a.getCoordinates(),e.geometry.coordinates)||a.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),a},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getAll().map((function(t){return t.toGeoJSON()}))}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==u.modes.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===u.modes.DIRECT_SELECT?t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===u.modes.SIMPLE_SELECT&&e.getMode()===u.modes.SIMPLE_SELECT?(s(o.featureIds||[],t.store.getSelectedIds())||(t.store.setSelected(o.featureIds,{silent:!0}),t.store.render()),e):(n===u.modes.DIRECT_SELECT&&e.getMode()===u.modes.DIRECT_SELECT&&o.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,o,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,o,r){return t.store.setFeatureProperty(n,o,r),e},e}},1077:function(t,e,n){(function(t,n){var o="[object Arguments]",r="[object Map]",i="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[o]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[r]=u["[object Number]"]=u[i]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var l="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,d=l||p||Function("return this")(),h=e&&!e.nodeType&&e,f=h&&"object"==typeof n&&n&&!n.nodeType&&n,g=f&&f.exports===h,m=g&&l.process,y=function(){try{return m&&m.binding&&m.binding("util")}catch(t){}}(),_=y&&y.isTypedArray;function v(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function b(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function E(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var S,C,x=Array.prototype,w=Function.prototype,T=Object.prototype,O=d["__core-js_shared__"],L=w.toString,I=T.hasOwnProperty,M=function(){var t=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),P=T.toString,A=RegExp("^"+L.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=g?d.Buffer:void 0,k=d.Symbol,j=d.Uint8Array,F=T.propertyIsEnumerable,D=x.splice,R=k?k.toStringTag:void 0,U=Object.getOwnPropertySymbols,B=N?N.isBuffer:void 0,V=(S=Object.keys,C=Object,function(t){return S(C(t))}),G=mt(d,"DataView"),$=mt(d,"Map"),z=mt(d,"Promise"),J=mt(d,"Set"),W=mt(d,"WeakMap"),Z=mt(Object,"create"),Y=bt(G),q=bt($),H=bt(z),X=bt(J),K=bt(W),Q=k?k.prototype:void 0,tt=Q?Q.valueOf:void 0;function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ot;++e<n;)this.add(t[e])}function it(t){var e=this.__data__=new nt(t);this.size=e.size}function at(t,e){var n=Ct(t),o=!n&&St(t),r=!n&&!o&&xt(t),i=!n&&!o&&!r&&It(t),a=n||o||r||i,s=a?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],c=s.length;for(var u in t)!e&&!I.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vt(u,c))||s.push(u);return s}function st(t,e){for(var n=t.length;n--;)if(Et(t[n][0],e))return n;return-1}function ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":R&&R in Object(t)?function(t){var e=I.call(t,R),n=t[R];try{t[R]=void 0;var o=!0}catch(i){}var r=P.call(t);o&&(e?t[R]=n:delete t[R]);return r}(t):function(t){return P.call(t)}(t)}function ut(t){return Lt(t)&&ct(t)==o}function lt(t,e,n,s,c){return t===e||(null==t||null==e||!Lt(t)&&!Lt(e)?t!==t&&e!==e:function(t,e,n,s,c,u){var l=Ct(t),p=Ct(e),d=l?"[object Array]":_t(t),h=p?"[object Array]":_t(e),f=(d=d==o?i:d)==i,g=(h=h==o?i:h)==i,m=d==h;if(m&&xt(t)){if(!xt(e))return!1;l=!0,f=!1}if(m&&!f)return u||(u=new it),l||It(t)?ht(t,e,n,s,c,u):function(t,e,n,o,i,s,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new j(t),new j(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Et(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case r:var u=b;case a:var l=1&o;if(u||(u=E),t.size!=e.size&&!l)return!1;var p=c.get(t);if(p)return p==e;o|=2,c.set(t,e);var d=ht(u(t),u(e),o,i,s,c);return c.delete(t),d;case"[object Symbol]":if(tt)return tt.call(t)==tt.call(e)}return!1}(t,e,d,n,s,c,u);if(!(1&n)){var y=f&&I.call(t,"__wrapped__"),_=g&&I.call(e,"__wrapped__");if(y||_){var v=y?t.value():t,S=_?e.value():e;return u||(u=new it),c(v,S,n,s,u)}}if(!m)return!1;return u||(u=new it),function(t,e,n,o,r,i){var a=1&n,s=ft(t),c=s.length,u=ft(e).length;if(c!=u&&!a)return!1;var l=c;for(;l--;){var p=s[l];if(!(a?p in e:I.call(e,p)))return!1}var d=i.get(t);if(d&&i.get(e))return d==e;var h=!0;i.set(t,e),i.set(e,t);var f=a;for(;++l<c;){p=s[l];var g=t[p],m=e[p];if(o)var y=a?o(m,g,p,e,t,i):o(g,m,p,t,e,i);if(!(void 0===y?g===m||r(g,m,n,o,i):y)){h=!1;break}f||(f="constructor"==p)}if(h&&!f){var _=t.constructor,v=e.constructor;_==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v||(h=!1)}return i.delete(t),i.delete(e),h}(t,e,n,s,c,u)}(t,e,n,s,lt,c))}function pt(t){return!(!Ot(t)||function(t){return!!M&&M in t}(t))&&(wt(t)?A:s).test(bt(t))}function dt(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||T;return t===n}(t))return V(t);var e=[];for(var n in Object(t))I.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ht(t,e,n,o,r,i){var a=1&n,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var l=-1,p=!0,d=2&n?new rt:void 0;for(i.set(t,e),i.set(e,t);++l<s;){var h=t[l],f=e[l];if(o)var g=a?o(f,h,l,e,t,i):o(h,f,l,t,e,i);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!v(e,(function(t,e){if(a=e,!d.has(a)&&(h===t||r(h,t,n,o,i)))return d.push(e);var a}))){p=!1;break}}else if(h!==f&&!r(h,f,n,o,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function ft(t){return function(t,e,n){var o=e(t);return Ct(t)?o:function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}(o,n(t))}(t,Mt,yt)}function gt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function mt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(n)?n:void 0}et.prototype.clear=function(){this.__data__=Z?Z(null):{},this.size=0},et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et.prototype.get=function(t){var e=this.__data__;if(Z){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return I.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return Z?void 0!==e[t]:I.call(e,t)},et.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Z&&void 0===e?"__lodash_hash_undefined__":e,this},nt.prototype.clear=function(){this.__data__=[],this.size=0},nt.prototype.delete=function(t){var e=this.__data__,n=st(e,t);return!(n<0)&&(n==e.length-1?e.pop():D.call(e,n,1),--this.size,!0)},nt.prototype.get=function(t){var e=this.__data__,n=st(e,t);return n<0?void 0:e[n][1]},nt.prototype.has=function(t){return st(this.__data__,t)>-1},nt.prototype.set=function(t,e){var n=this.__data__,o=st(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this},ot.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new($||nt),string:new et}},ot.prototype.delete=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e},ot.prototype.get=function(t){return gt(this,t).get(t)},ot.prototype.has=function(t){return gt(this,t).has(t)},ot.prototype.set=function(t,e){var n=gt(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},rt.prototype.add=rt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},rt.prototype.has=function(t){return this.__data__.has(t)},it.prototype.clear=function(){this.__data__=new nt,this.size=0},it.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},it.prototype.get=function(t){return this.__data__.get(t)},it.prototype.has=function(t){return this.__data__.has(t)},it.prototype.set=function(t,e){var n=this.__data__;if(n instanceof nt){var o=n.__data__;if(!$||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new ot(o)}return n.set(t,e),this.size=n.size,this};var yt=U?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,o=null==t?0:t.length,r=0,i=[];++n<o;){var a=t[n];e(a,n,t)&&(i[r++]=a)}return i}(U(t),(function(e){return F.call(t,e)})))}:function(){return[]},_t=ct;function vt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||c.test(t))&&t>-1&&t%1==0&&t<e}function bt(t){if(null!=t){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Et(t,e){return t===e||t!==t&&e!==e}(G&&"[object DataView]"!=_t(new G(new ArrayBuffer(1)))||$&&_t(new $)!=r||z&&"[object Promise]"!=_t(z.resolve())||J&&_t(new J)!=a||W&&"[object WeakMap]"!=_t(new W))&&(_t=function(t){var e=ct(t),n=e==i?t.constructor:void 0,o=n?bt(n):"";if(o)switch(o){case Y:return"[object DataView]";case q:return r;case H:return"[object Promise]";case X:return a;case K:return"[object WeakMap]"}return e});var St=ut(function(){return arguments}())?ut:function(t){return Lt(t)&&I.call(t,"callee")&&!F.call(t,"callee")},Ct=Array.isArray;var xt=B||function(){return!1};function wt(t){if(!Ot(t))return!1;var e=ct(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ot(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Lt(t){return null!=t&&"object"==typeof t}var It=_?function(t){return function(e){return t(e)}}(_):function(t){return Lt(t)&&Tt(t.length)&&!!u[ct(t)]};function Mt(t){return null!=(e=t)&&Tt(e.length)&&!wt(e)?at(t):dt(t);var e}n.exports=function(t,e){return lt(t,e)}}).call(this,n(62),n(146)(t))},1078:function(t,e){t.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map((function(t){return t})).sort())===JSON.stringify(e.map((function(t){return t})).sort())}},1079:function(t,e,n){var o=n(1080),r=n(1082);t.exports.hint=function(t,e){var n,i=[];if("object"===typeof t)n=t;else{if("string"!==typeof t)return[{message:"Expected string or object as input",line:0}];try{n=o.parse(t)}catch(s){var a=s.message.match(/line (\d+)/);return[{line:parseInt(a[1],10)-1,message:s.message,error:s}]}}return i=i.concat(r.hint(n,e))}},1080:function(t,e,n){(function(t,o){var r=function(){var t=function(t,e,n,o){for(n=n||{},o=t.length;o--;n[t[o]]=e);return n},e=[1,12],n=[1,13],o=[1,9],r=[1,10],i=[1,11],a=[1,14],s=[1,15],c=[14,18,22,24],u=[18,22],l=[22,24],p={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,o,r,i,a){var s=i.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],void 0!==i[s-2][i[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(i[s][0])),i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,11]),t(c,[2,12]),t(c,[2,3]),t(c,[2,4]),t(c,[2,5]),t([14,18,21,22,24],[2,1]),t(c,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(c,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(c,[2,18]),{22:[1,28],24:[1,27]},t(l,[2,20]),t(c,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:30,15:7,16:8,17:a,23:s},t(c,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:31,15:7,16:8,17:a,23:s},t(u,[2,17]),t(u,[2,15]),t(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){var n=function(t,e){this.message=t,this.hash=e};throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e=this,n=[0],o=[null],r=[],i=this.table,a="",s=0,c=0,u=0,l=2,p=1,d=r.slice.call(arguments,1),h=Object.create(this.lexer),f={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(f.yy[g]=this.yy[g]);h.setInput(t,f.yy),f.yy.lexer=h,f.yy.parser=this,"undefined"==typeof h.yylloc&&(h.yylloc={});var m=h.yylloc;r.push(m);var y=h.options&&h.options.ranges;"function"===typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,v,b,E,S,C,x,w,T,O=function(){var t;return"number"!==typeof(t=h.lex()||p)&&(t=e.symbols_[t]||t),t},L={};;){if(b=n[n.length-1],this.defaultActions[b]?E=this.defaultActions[b]:(null!==_&&"undefined"!=typeof _||(_=O()),E=i[b]&&i[b][_]),"undefined"===typeof E||!E.length||!E[0]){var I="";for(C in T=[],i[b])this.terminals_[C]&&C>l&&T.push("'"+this.terminals_[C]+"'");I=h.showPosition?"Parse error on line "+(s+1)+":\n"+h.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(s+1)+": Unexpected "+(_==p?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(I,{text:h.match,token:this.terminals_[_]||_,line:h.yylineno,loc:m,expected:T})}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+_);switch(E[0]){case 1:n.push(_),o.push(h.yytext),r.push(h.yylloc),n.push(E[1]),_=null,v?(_=v,v=null):(c=h.yyleng,a=h.yytext,s=h.yylineno,m=h.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[E[1]][1],L.$=o[o.length-x],L._$={first_line:r[r.length-(x||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(x||1)].first_column,last_column:r[r.length-1].last_column},y&&(L._$.range=[r[r.length-(x||1)].range[0],r[r.length-1].range[1]]),"undefined"!==typeof(S=this.performAction.apply(L,[a,c,s,f.yy,E[1],o,r].concat(d))))return S;x&&(n=n.slice(0,-1*x*2),o=o.slice(0,-1*x),r=r.slice(0,-1*x)),n.push(this.productions_[E[1]][0]),o.push(L.$),r.push(L._$),w=i[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,o,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((n=this._input.match(this.rules[r[i]]))&&(!e||n[0].length>e[0].length)){if(e=n,o=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[o]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,o){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return p.lexer=d,h.prototype=p,p.Parser=h,new h}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)},e.main=function(o){o[1]||(console.log("Usage: "+o[0]+" FILE"),t.exit(1));var r=n(1081).readFileSync(n(290).normalize(o[1]),"utf8");return e.parser.parse(r)},n.c[n.s]===o&&e.main(t.argv.slice(1))}).call(this,n(85),n(146)(t))},1081:function(t,e){},1082:function(t,e,n){var o=n(1083);t.exports.hint=function(t,e){var n=[],r=0;function i(t){if(e&&!1===e.noDuplicateMembers||!t.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!s(t,"type","string"))if(h[t.type])t&&h[t.type](t);else{var o=f[t.type.toLowerCase()];void 0!==o?n.push({message:"Expected "+o+" but got "+t.type+" (case sensitive)",line:t.__line__}):n.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function a(t,e){return t.every((function(t){return null!==t&&typeof t===e}))}function s(t,e,o){if("undefined"===typeof t[e])return n.push({message:'"'+e+'" member required',line:t.__line__});if("array"===o){if(!Array.isArray(t[e]))return n.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===o&&t[e]&&t[e].constructor!==Object)return n.push({message:'"'+e+'" member should be '+o+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(o&&typeof t[e]!==o)return n.push({message:'"'+e+'" member should be '+o+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function c(t,o){if(!Array.isArray(t))return n.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||o});if(t.length<2)return n.push({message:"position must have 2 or more elements",line:t.__line__||o});if(t.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:t.__line__||o});if(!a(t,"number"))return n.push({message:"each element in a position must be a number",line:t.__line__||o});if(e&&e.precisionWarning){if(10===r)return r+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:t.__line__||o});r<10&&t.forEach((function(e){var i=0,a=String(e).split(".")[1];if(void 0!==a&&(i=a.length),i>6)return r+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||o})}))}}function u(t,e,o,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===o)return c(t,r);if(1===o&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r}),!0;if(t.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every((function(e,n){return t[0][n]===e}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r}),!0}else if("Line"===e&&t.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(Array.isArray(t))return t.map((function(t){return u(t,e,o-1,t.__line__||r)})).some((function(t){return t}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function l(t){if(t.crs){"object"===typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):n.push({message:"old-style crs member is not recommended",line:t.__line__})}}function p(t){if(t.bbox)return Array.isArray(t.bbox)?(a(t.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function d(t){l(t),p(t),void 0!==t.id&&"string"!==typeof t.id&&"number"!==typeof t.id&&n.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&n.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&n.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),s(t,"properties","object"),s(t,"geometry","object")||t.geometry&&i(t.geometry)}var h={Point:function(t){var e;l(t),p(t),void 0!==(e=t).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:e.__line__}),void 0!==e.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:e.__line__}),void 0!==e.features&&n.push({message:'geometry object cannot contain a "features" member',line:e.__line__}),s(t,"coordinates","array")||c(t.coordinates)},Feature:d,MultiPoint:function(t){l(t),p(t),s(t,"coordinates","array")||u(t.coordinates,"",1)},LineString:function(t){l(t),p(t),s(t,"coordinates","array")||u(t.coordinates,"Line",1)},MultiLineString:function(t){l(t),p(t),s(t,"coordinates","array")||u(t.coordinates,"Line",2)},FeatureCollection:function(t){if(l(t),p(t),void 0!==t.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!s(t,"features","array")){if(!a(t.features,"object"))return n.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(d)}},GeometryCollection:function(t){l(t),p(t),s(t,"geometries","array")||(a(t.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach((function(e){e&&("GeometryCollection"===e.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),i(e))})))},Polygon:function(t){l(t),p(t),s(t,"coordinates","array")||u(t.coordinates,"LinearRing",2)||o(t,n)},MultiPolygon:function(t){l(t),p(t),s(t,"coordinates","array")||u(t.coordinates,"LinearRing",3)||o(t,n)}},f=Object.keys(h).reduce((function(t,e){return t[e.toLowerCase()]=e,t}),{});return"object"!==typeof t||null===t||void 0===t?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(i(t),n.forEach((function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line})),n)}},1083:function(t,e){function n(t){return t*Math.PI/180}function o(t){var e=0;if(t.length>2)for(var o,r,i=0;i<t.length-1;i++)o=t[i],e+=n((r=t[i+1])[0]-o[0])*(2+Math.sin(n(o[1]))+Math.sin(n(r[1])));return e>=0}function r(t){if(t&&t.length>0){if(o(t[0]))return!1;if(!t.slice(1,t.length).every(o))return!1}return!0}t.exports=function(t,e){(function(t){return"Polygon"===t.type?r(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(r):void 0})(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},1087:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?i(t):e}var p=n(1),d=n(994),h=n(1036),f=n.n(h);function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=f.a.modes,y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(y,t);var e,n,u,h,m=(e=y,function(){var t,n=s(e);if(c()){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return l(this,t)});function y(){var t;o(this,y);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(i(t=m.call.apply(m,[this].concat(n))),"_createControl",(function(){var e=t._map;t._draw=new f.a({keybindings:t.props.keybindings,touchEnabled:t.props.touchEnabled,boxSelect:t.props.boxSelect,clickBuffer:t.props.clickBuffer,touchBuffer:t.props.touchBuffer,controls:{point:t.props.pointControl,line_string:t.props.lineStringControl,polygon:t.props.polygonControl,trash:t.props.trashControl,combine_features:t.props.combineFeaturesControl,uncombine_features:t.props.uncombineFeaturesControl},displayControlsDefault:t.props.displayControlsDefault,styles:t.props.styles,modes:"function"===typeof t.props.modes?t.props.modes(t.constructor.defaultProps.modes):t.props.modes,defaultMode:t.props.mode,userProperties:t.props.userProperties}),e.addControl(t._draw,t.props.position),e.on("draw.create",t._onDrawCreate),e.on("draw.create",t._onChange),e.on("draw.delete",t._onDrawDelete),e.on("draw.delete",t._onChange),e.on("draw.combine",t._onDrawCombine),e.on("draw.combine",t._onChange),e.on("draw.uncombine",t._onDrawUncombine),e.on("draw.uncombine",t._onChange),e.on("draw.update",t._onDrawUpdate),e.on("draw.update",t._onChange),e.on("draw.selectionchange",t._onDrawSelectionchange),e.on("draw.modechange",t._onDrawModechange),e.on("draw.render",t._onDrawRender),e.on("draw.actionable",t._onDrawActionable),t.props.data&&t._draw.add(t.props.data)})),g(i(t),"_removeControl",(function(){var e=t._map;e&&e.getStyle()&&(e.off("draw.create",t._onDrawCreate),e.off("draw.create",t._onChange),e.off("draw.delete",t._onDrawDelete),e.off("draw.delete",t._onChange),e.off("draw.combine",t._onDrawCombine),e.off("draw.combine",t._onChange),e.off("draw.uncombine",t._onDrawUncombine),e.off("draw.uncombine",t._onChange),e.off("draw.update",t._onDrawUpdate),e.off("draw.update",t._onChange),e.off("draw.selectionchange",t._onDrawSelectionchange),e.off("draw.modechange",t._onDrawModechange),e.off("draw.render",t._onDrawRender),e.off("draw.actionable",t._onDrawActionable),e.removeControl(t._draw))})),g(i(t),"_onChange",(function(){var e=t.props.onChange;e&&e(t._draw.getAll())})),g(i(t),"_onDrawCreate",(function(e){t.props.onDrawCreate&&t.props.onDrawCreate(e)})),g(i(t),"_onDrawDelete",(function(e){t.props.onDrawDelete&&t.props.onDrawDelete(e)})),g(i(t),"_onDrawCombine",(function(e){t.props.onDrawCombine&&t.props.onDrawCombine(e)})),g(i(t),"_onDrawUncombine",(function(e){t.props.onDrawUncombine&&t.props.onDrawUncombine(e)})),g(i(t),"_onDrawUpdate",(function(e){t.props.onDrawUpdate&&t.props.onDrawUpdate(e)})),g(i(t),"_onDrawSelectionchange",(function(e){t.props.onDrawSelectionChange&&t.props.onDrawSelectionChange(e)})),g(i(t),"_onDrawModechange",(function(e){t.props.onDrawModeChange&&t.props.onDrawModeChange(e)})),g(i(t),"_onDrawRender",(function(e){t.props.onDrawRender&&t.props.onDrawRender(e)})),g(i(t),"_onDrawActionable",(function(e){t.props.onDrawActionable&&t.props.onDrawActionable(e)})),t}return n=y,(u=[{key:"componentDidMount",value:function(){this._createControl()}},{key:"componentDidUpdate",value:function(t){this.props.data&&this._draw.set(this.props.data),t.position!==this.props.position&&(this._removeControl(),this._createControl()),t.mode!==this.props.mode&&this._draw.changeMode(this.props.mode,this.props.modeOptions)}},{key:"componentWillUnmount",value:function(){this._removeControl()}},{key:"getDraw",value:function(){return this._draw}},{key:"render",value:function(){var t=this;return Object(p.createElement)(d.a.Consumer,{},(function(e){return e&&(t._map=e),null}))}}])&&r(n.prototype,u),h&&r(n,h),y}(p.PureComponent);g(y,"defaultProps",{position:"top-right",keybindings:!0,touchEnabled:!0,boxSelect:!0,clickBuffer:2,touchBuffer:25,pointControl:!0,lineStringControl:!0,polygonControl:!0,trashControl:!0,combineFeaturesControl:!0,uncombineFeaturesControl:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:m,mode:"simple_select",modeOptions:{},userProperties:!1,data:null,onDrawCreate:null,onDrawDelete:null,onDrawCombine:null,onDrawUncombine:null,onDrawUpdate:null,onDrawSelectionChange:null,onDrawModeChange:null,onDrawRender:null,onDrawActionable:null,onChange:null});e.a=y},951:function(t,e){t.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},958:function(t,e,n){var o=n(951);t.exports={isOfMetaType:function(t){return function(e){var n=e.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===t)}},isShiftMousedown:function(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)},isActiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===o.activeStates.ACTIVE&&t.featureTarget.properties.meta===o.meta.FEATURE))},isInactiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===o.activeStates.INACTIVE&&t.featureTarget.properties.meta===o.meta.FEATURE))},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===o.meta.FEATURE)},isVertex:function(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===o.meta.VERTEX)},isShiftDown:function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},965:function(t,e,n){var o=n(1041),r=n(1044),i=n(951),a=n(966),s=[i.meta.FEATURE,i.meta.MIDPOINT,i.meta.VERTEX];function c(t,e,n,i){if(null===n.map)return[];var c=t?r(t,i):e,u={};n.options.styles&&(u.layers=n.options.styles.map((function(t){return t.id})));var l=n.map.queryRenderedFeatures(c,u).filter((function(t){return-1!==s.indexOf(t.properties.meta)})),p=new a,d=[];return l.forEach((function(t){var e=t.properties.id;p.has(e)||(p.add(e),d.push(t))})),o(d)}t.exports={click:function(t,e,n){return c(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return c(t,e,n,n.options.touchBuffer)}}},966:function(t,e){function n(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"===typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}n.prototype.add=function(t){return this.has(t)||(this._length++,"string"===typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},n.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},n.prototype.has=function(t){return("string"===typeof t||"number"===typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},n.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(n){e.push({k:n,v:t._items[n]})})),Object.keys(this._nums).forEach((function(n){e.push({k:JSON.parse(n),v:t._nums[n]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},n.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},t.exports=n},967:function(t,e,n){var o=n(977),r=n(951),i=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||o(),this.type=e.geometry.type};i.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},i.prototype.incomingCoords=function(t){this.setCoordinates(t)},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},i.prototype.setProperty=function(t,e){this.properties[t]=e},i.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:r.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},i.prototype.internal=function(t){var e={id:this.id,meta:r.meta.FEATURE,"meta:type":this.type,active:r.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_".concat(n)]=this.properties[n];return{type:r.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},t.exports=i},968:function(t,e,n){var o=n(967),r=n(951),i=n(977),a={MultiPoint:n(976),MultiLineString:n(978),MultiPolygon:n(979)},s=function(t,e,n,o,r){var i=n.split("."),a=parseInt(i[0],10),s=i[1]?i.slice(1).join("."):null;return t[a][e](s,o,r)},c=function(t,e){if(o.call(this,t,e),delete this.coordinates,this.model=a[e.geometry.type],void 0===this.model)throw new TypeError("".concat(e.geometry.type," is not a valid type"));this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(c.prototype=Object.create(o.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map((function(t){return new n(e.ctx,{id:i(),type:r.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})}))},c.prototype.isValid=function(){return this.features.every((function(t){return t.isValid()}))},c.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},c.prototype.getCoordinate=function(t){return s(this.features,"getCoordinate",t)},c.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(t){return t.type===r.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates}))))},c.prototype.updateCoordinate=function(t,e,n){s(this.features,"updateCoordinate",t,e,n),this.changed()},c.prototype.addCoordinate=function(t,e,n){s(this.features,"addCoordinate",t,e,n),this.changed()},c.prototype.removeCoordinate=function(t){s(this.features,"removeCoordinate",t),this.changed()},c.prototype.getFeatures=function(){return this.features},t.exports=c},969:function(t,e){t.exports={enable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},disable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)}}},976:function(t,e,n){var o=n(967),r=function(t,e){o.call(this,t,e)};(r.prototype=Object.create(o.prototype)).isValid=function(){return"number"===typeof this.coordinates[0]&&"number"===typeof this.coordinates[1]},r.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},t.exports=r},977:function(t,e){var n=t.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(e),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(e)*r;var i=o-Math.floor(o),a="";for(r=0;r<Math.floor(o);r++){a=Math.floor(Math.random()*e).toString(e)+a}if(i){var s=Math.pow(e,i);a=Math.floor(Math.random()*s).toString(e)+a}var c=parseInt(a,e);return c!==1/0&&c>=Math.pow(2,t)?n(t,e):a};n.rack=function(t,e,o){var r=function(r){var a=0;do{if(a++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var s=n(t,e)}while(Object.hasOwnProperty.call(i,s));return i[s]=r,s},i=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},978:function(t,e,n){var o=n(967),r=function(t,e){o.call(this,t,e)};(r.prototype=Object.create(o.prototype)).isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(t,e,n){this.changed();var o=parseInt(t,10);this.coordinates.splice(o,0,[e,n])},r.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},r.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},r.prototype.updateCoordinate=function(t,e,n){var o=parseInt(t,10);this.coordinates[o]=[e,n],this.changed()},t.exports=r},979:function(t,e,n){var o=n(967),r=function(t,e){o.call(this,t,e),this.coordinates=this.coordinates.map((function(t){return t.slice(0,-1)}))};(r.prototype=Object.create(o.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(t){return t.length>2}))},r.prototype.incomingCoords=function(t){this.coordinates=t.map((function(t){return t.slice(0,-1)})),this.changed()},r.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},r.prototype.addCoordinate=function(t,e,n){this.changed();var o=t.split(".").map((function(t){return parseInt(t,10)}));this.coordinates[o[0]].splice(o[1],0,[e,n])},r.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},r.prototype.getCoordinate=function(t){var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map((function(t){return t.concat([t[0]])}))},r.prototype.updateCoordinate=function(t,e,n){this.changed();var o=t.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,n]},t.exports=r},980:function(t,e,n){var o=n(951);t.exports=function(t,e,n,r){return{type:o.geojsonTypes.FEATURE,properties:{meta:o.meta.VERTEX,parent:t,coord_path:n,active:r?o.activeStates.ACTIVE:o.activeStates.INACTIVE},geometry:{type:o.geojsonTypes.POINT,coordinates:e}}}},994:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return d}));var o=n(1),r=n(24);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function c(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var d=Object(o.createContext)(null),h="[object process]"!==Object.prototype.toString.call(t.process)||t.process.browser?n(972):null,f=["resize","remove","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading"],g=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=new Set([].concat(l(Object.keys(t)),l(Object.keys(e))));return l(n).reduce((function(n,o){var r=t[o];return r!==e[o]&&n.push([o,r]),n}),[])},m=function(t,e,n,o){var r={layers:[e]};if(o){var i=[[n[0]-o,n[1]-o],[n[0]+o,n[1]+o]];return t.queryRenderedFeatures(i,r)}return t.queryRenderedFeatures(n,r)},y=[["onClick","click"],["onHover","mousemove"],["onEnter","mouseenter"],["onLeave","mouseleave"]],_=function(t){function e(e){var n;return i(u(n=t.call(this,e)||this),"$key",void 0),i(u(n),"$value",void 0),i(u(n),"_id",void 0),i(u(n),"_map",void 0),i(u(n),"_onClick",void 0),i(u(n),"_onHover",void 0),i(u(n),"_onEnter",void 0),i(u(n),"_onLeave",void 0),i(u(n),"_addLayer",(function(t){var e=n._map,o=t.before,r=(t.radius,t.onClick,t.onHover,t.onEnter,t.onLeave,c(t,["before","radius","onClick","onHover","onEnter","onLeave"]));o&&e.getLayer(o)?e.addLayer(r,o):e.addLayer(r),n._addEventListeners(t)})),i(u(n),"_addEventListeners",(function(t){y.forEach((function(e){var o=e[0],r=e[1],i="_"+o;t[o]&&n._map.on(r,n._id,n[i])}))})),i(u(n),"_updateEventListeners",(function(t,e){y.forEach((function(o){var r=o[0],i=o[1],a="_"+r;!e[r]&&t[r]&&n._map.off(i,n._id,n[a]),e[r]&&!t[r]&&n._map.on(i,n._id,n[a])}))})),i(u(n),"_removeEventListeners",(function(t){y.forEach((function(e){var o=e[0],r=e[1],i="_"+o;t[o]&&n._map.off(r,n._id,n[i])}))})),i(u(n),"_onClick",(function(t){var e=[t.point.x,t.point.y],o=m(n._map,n._id,e,n.props.radius);n.props.onClick(a({},t,{features:o}))})),i(u(n),"_onHover",(function(t){var e=[t.point.x,t.point.y],o=m(n._map,n._id,e,n.props.radius);n.props.onHover(a({},t,{features:o}))})),i(u(n),"_onEnter",(function(t){var e=[t.point.x,t.point.y],o=m(n._map,n._id,e,n.props.radius);n.props.onEnter(a({},t,{features:o}))})),i(u(n),"_onLeave",(function(t){var e=[t.point.x,t.point.y],o=m(n._map,n._id,e,n.props.radius);n.props.onLeave(a({},t,{features:o}))})),n._id=e.id,n}s(e,t);var n=e.prototype;return n.componentDidMount=function(){this._addLayer(this.props)},n.componentDidUpdate=function(t){var e=this,n=this._map,o=this.props,r=o.id,i=o.before,a=(o.onClick,c(o,["id","before","onClick"]));if(r!==t.id||this.props.type!==t.type||"background"!==t.type&&(this.props.source!==t.source||this.props["source-layer"]!==t["source-layer"]))return this._id=r,this._map.removeLayer(t.id),void this._addLayer(this.props);i!==t.before&&i&&n.getLayer(i)&&n.moveLayer(this._id,i),a.paint!==t.paint&&g(a.paint,t.paint).forEach((function(t){var o=t[0],r=t[1];n.setPaintProperty(e._id,o,r)})),a.layout!==t.layout&&g(a.layout,t.layout).forEach((function(t){var o=t[0],r=t[1];n.setLayoutProperty(e._id,o,r)})),a.filter!==t.filter&&(a.filter?n.setFilter(this._id,a.filter):n.setFilter(this._id,void 0)),this._updateEventListeners(t,this.props)},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&(this._removeEventListeners(this.props),this._map.getLayer(this._id)&&this._map.removeLayer(this._id))},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(_,"displayName","Layer"),i(_,"defaultProps",{radius:0});var v=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_id",void 0),i(u(e),"_map",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.layer,n=t.before;n&&this._map.getLayer(n)?this._map.addLayer(e,n):this._map.addLayer(e),this._id=e.id},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&this._map.removeLayer(this._id)},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(v,"displayName","CustomLayer");var b=[_,v],E=function(t){return b.includes(t.type)},S=function(t){var e=[];return function t(e,n){o.Children.forEach(n,(function(n){n&&(E(n)&&e(n),n.props&&n.props.children&&t(e,n.props.children))}))}((function(t){t.props.before||e.push(function(t){return t.props.id||t.props.layer.id}(t))}),t),e},C=function(t){function e(e){var n;return i(u(n=t.call(this,e)||this),"_map",void 0),i(u(n),"_container",void 0),i(u(n),"state",{loaded:!1}),i(u(n),"_onViewportChange",(function(t){if(t.originalEvent){var e=n._map,o=e.getCenter(),r=o.lng,i={latitude:o.lat,longitude:r,zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()};n.props.onViewportChange(i)}})),h&&(h.accessToken=e.accessToken),n._container=Object(o.createRef)(),n}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this;if(h){var e=this._container.current,n=new h.Map({container:e,style:this.props.mapStyle,interactive:!!this.props.onViewportChange,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,pitch:this.props.pitch,bearing:this.props.bearing,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,hash:this.props.hash,bearingSnap:this.props.bearingSnap,pitchWithRotate:this.props.pitchWithRotate,attributionControl:this.props.attributionControl,logoPosition:this.props.logoPosition,failIfMajorPerformanceCaveat:this.props.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.props.preserveDrawingBuffer,antialias:this.props.antialias,refreshExpiredTiles:this.props.refreshExpiredTiles,maxBounds:this.props.maxBounds,bounds:this.props.bounds,scrollZoom:this.props.scrollZoom,boxZoom:this.props.boxZoom,dragRotate:this.props.dragRotate,dragPan:this.props.dragPan,keyboard:this.props.keyboard,doubleClickZoom:this.props.doubleClickZoom,trackResize:this.props.trackResize,renderWorldCopies:this.props.renderWorldCopies,maxTileCacheSize:this.props.maxTileCacheSize,localIdeographFontFamily:this.props.localIdeographFontFamily,transformRequest:this.props.transformRequest,collectResourceTiming:this.props.collectResourceTiming,fadeDuration:this.props.fadeDuration,crossSourceCollisions:this.props.crossSourceCollisions,locale:this.props.locale});this._map=n,n.once("load",(function(){t.setState({loaded:!0},t.props.onLoad)})),this.props.onViewportChange&&(n.on("dragend",this._onViewportChange),n.on("zoomend",this._onViewportChange),n.on("rotateend",this._onViewportChange),n.on("pitchend",this._onViewportChange),n.on("boxzoomend",this._onViewportChange)),f.forEach((function(e){var o="on"+function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),r=t.props[o];r&&(Array.isArray(r)?n.on.apply(n,[e].concat(l(r))):n.on(e,r))})),this.props.cursorStyle&&(n.getCanvas().style.cursor=this.props.cursorStyle),this.props.showTileBoundaries&&(this._map.showTileBoundaries=this.props.showTileBoundaries)}},n.componentDidUpdate=function(t){this._updateMapViewport(t,this.props),this._updateMapStyle(t,this.props),this._updateMapSize(t,this.props),!t.cursorStyle!==this.props.cursorStyle&&(this._map.getCanvas().style.cursor=this.props.cursorStyle),t.showTileBoundaries!==this.props.showTileBoundaries&&(this._map.showTileBoundaries=!!this.props.showTileBoundaries)},n.componentWillUnmount=function(){this._map&&this._map.remove()},n.getMap=function(){return this._map},n._updateMapStyle=function(t,e){var n=this,o=e.mapStyle,r=t.mapStyle;o!==r&&this.setState({loaded:!1},(function(){n._map.setStyle(o),n._map.once("style.load",(function(){return n.setState({loaded:!0})}))}))},n._updateMapViewport=function(t,e){var n=this._map,o=n.getCenter();if(e.latitude!==t.latitude&&e.latitude!==o.lat||e.longitude!==t.longitude&&e.longitude!==o.lng||e.zoom!==t.zoom&&e.zoom!==n.getZoom()||e.pitch!==t.pitch&&e.pitch!==n.getPitch()||e.bearing!==t.bearing&&e.bearing!==n.getBearing()){var r={center:[e.longitude,e.latitude],zoom:e.zoom,pitch:e.pitch,bearing:e.bearing},i=this.props,s=i.viewportChangeMethod,c=a({},i.viewportChangeOptions,r);switch(s){case"flyTo":n.flyTo(c);break;case"jumpTo":n.jumpTo(c);break;case"easeTo":n.easeTo(c);break;default:throw new Error("Unknown viewport change method")}}},n._updateMapSize=function(t,e){((t.style&&t.style.height)!==(e.style&&e.style.height)||(t.style&&t.style.width)!==(e.style&&e.style.width))&&this._map.resize()},n.render=function(){var t=this.state.loaded,e=this.props,n=e.className,r=e.style,i=this.props.children?function(t){var e=S(t);return e.shift(),function t(n){return"function"==typeof n?n:o.Children.map(n,(function(n){if(!n)return n;if(E(n)){var r=n.props.before||e.shift();return Object(o.cloneElement)(n,{before:r})}return n.props&&n.props.children?Object(o.cloneElement)(n,{children:t(n.props.children)}):n}))}(t)}(this.props.children):null;return Object(o.createElement)(d.Provider,{value:this._map},Object(o.createElement)("div",{ref:this._container,style:r,className:n},t&&i))},e}(o.PureComponent);i(C,"displayName","MapGL"),i(C,"defaultProps",{children:null,className:null,style:null,mapStyle:"mapbox://styles/mapbox/light-v8",accessToken:null,bearing:0,pitch:0,minZoom:0,maxZoom:22,maxBounds:null,bounds:null,hash:!1,bearingSnap:7,pitchWithRotate:!0,attributionControl:!0,logoPosition:"bottom-left",failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,antialias:!1,refreshExpiredTiles:!0,boxZoom:!0,scrollZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,trackResize:!0,renderWorldCopies:!0,maxTileCacheSize:null,onViewportChange:null,onLoad:null,localIdeographFontFamily:null,transformRequest:null,collectResourceTiming:!1,fadeDuration:300,crossSourceCollisions:!0,locale:null,cursorStyle:null,viewportChangeMethod:"jumpTo",viewportChangeOptions:null});var x=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=[]),t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},w=function(t){switch(t.type){case"vector":return a({type:"vector"},t);case"raster":return a({type:"raster"},t);case"raster-dem":return a({type:"raster-dem"},t);case"geojson":return a({type:"geojson"},t);case"video":return a({type:"video"},t);case"image":return a({type:"image"},t);default:throw new Error("Unknown type for '"+t.id+"' Source")}},T=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"state",{loaded:!1}),i(u(e),"_onSourceData",(function(){e._map.isSourceLoaded(e.props.id)&&(e._map.off("sourcedata",e._onSourceData),e.setState({loaded:!0}))})),i(u(e),"_updateGeoJSONSource",(function(t,n,o){if(o.data!==n.data){var r=e._map.getSource(t);void 0!==r&&r.setData(o.data)}})),i(u(e),"_updateImageSource",(function(t,n,o){if(o.url!==n.url||o.coordinates!==n.coordinates){var r=e._map.getSource(t);void 0!==r&&r.updateImage(o)}})),i(u(e),"_updateTileSource",(function(t,n,o){if(o.url!==n.url||!x(o.tiles,n.tiles)){var r=e._map.getSource(t);r._tileJSONRequest&&r._tileJSONRequest.cancel(),r.url=o.url,r.scheme=o.scheme,r._options=a({},r._options,o);var i=e._map.style.sourceCaches[t];i&&i.clearTiles(),r.load()}})),i(u(e),"_removeSource",(function(){var t=e.props.id;if(e._map.getSource(t)){var n=e._map.getStyle().layers;n&&n.forEach((function(n){n.source===t&&e._map.removeLayer(n.id)})),e._map.removeSource(t)}})),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.id,n=(t.children,c(t,["id","children"])),o=w(n);this._map.addSource(e,o),this._map.on("sourcedata",this._onSourceData)},n.componentDidUpdate=function(t){var e=t.id,n=(t.children,c(t,["id","children"])),o=w(n),r=this.props,i=r.id,a=(r.children,c(r,["id","children"])),s=w(a);if(i!==e||s.type!==o.type)return this._map.removeSource(e),void this._map.addSource(i,s);"geojson"!==s.type||"geojson"!==o.type?"image"!==s.type||"image"!==o.type?"vector"!==s.type||"vector"!==o.type?"raster"===s.type&&"raster"===o.type&&this._updateTileSource(i,o,s):this._updateTileSource(i,o,s):this._updateImageSource(i,o,s):this._updateGeoJSONSource(i,o,s)},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._removeSource()},n.render=function(){var t=this,e=this.state.loaded,n=this.props.children;return Object(o.createElement)(d.Consumer,{},(function(o){return o&&(t._map=o),e&&n}))},e}(o.PureComponent);i(T,"displayName","Source");var O=function(t){function e(e){var n;return i(u(n=t.call(this,e)||this),"_map",void 0),i(u(n),"_el",void 0),i(u(n),"_popup",void 0),n._el=document.createElement("div"),n}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.longitude,n=t.latitude,o=t.offset,r=t.closeButton,i=t.closeOnClick,a=t.onClose,s=t.anchor,c=t.className,u=t.maxWidth;this._popup=new h.Popup({offset:o,closeButton:r,closeOnClick:i,anchor:s,className:c,maxWidth:u}),this._popup.setDOMContent(this._el),this._popup.setLngLat([e,n]).addTo(this._map),a&&this._popup.on("close",a)},n.componentDidUpdate=function(t){(t.latitude!==this.props.latitude||t.longitude!==this.props.longitude)&&this._popup.setLngLat([this.props.longitude,this.props.latitude])},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._popup.remove()},n.getPopup=function(){return this._popup},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),Object(r.createPortal)(t.props.children,t._el)}))},e}(o.PureComponent);i(O,"displayName","Popup"),i(O,"defaultProps",{closeButton:!0,closeOnClick:!0,onClose:null,anchor:null,offset:null,className:null,maxWidth:"240px"});var L=function(t){function e(e){var n;return i(u(n=t.call(this,e)||this),"_map",void 0),i(u(n),"_el",void 0),i(u(n),"_marker",void 0),i(u(n),"_onDragEnd",(function(){n.props.onDragEnd(n._marker.getLngLat())})),i(u(n),"_onDragStart",(function(){n.props.onDragStart(n._marker.getLngLat())})),i(u(n),"_onDrag",(function(){n.props.onDrag(n._marker.getLngLat())})),n._el=document.createElement("div"),n}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.longitude,n=t.latitude,o=t.onClick,r=t.onDragEnd,i=t.onDragStart,a=t.onDrag;this._marker=new h.Marker({element:this._el,anchor:this.props.anchor,draggable:this.props.draggable,offset:this.props.offset,rotation:this.props.rotation,pitchAlignment:this.props.pitchAlignment,rotationAlignment:this.props.rotationAlignment}),this._marker.setLngLat([e,n]).addTo(this._map),o&&this._el.addEventListener("click",o),r&&this._marker.on("dragend",this._onDragEnd),i&&this._marker.on("dragstart",this._onDragStart),a&&this._marker.on("drag",this._onDrag)},n.componentDidUpdate=function(t){(t.latitude!==this.props.latitude||t.longitude!==this.props.longitude)&&this._marker.setLngLat([this.props.longitude,this.props.latitude])},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&(this.props.onClick&&this._el.removeEventListener("click",this.props.onClick),this._marker.remove())},n.getMarker=function(){return this._marker},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),Object(r.createPortal)(t.props.children,t._el)}))},e}(o.PureComponent);i(L,"displayName","Marker"),i(L,"defaultProps",{anchor:"center",offset:null,draggable:!1,rotation:0,pitchAlignment:"auto",rotationAlignment:"auto"});!function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),e}s(e,t);var n=e.prototype;n.componentDidMount=function(){var t=this._map,e=this.props,n=e.id,o=e.source,r=e.sourceLayer,i=e.state;t.setFeatureState({id:n,source:o,sourceLayer:r},i)},n.componentDidUpdate=function(t){var e=this._map,n=this.props,o=n.id,r=n.source,i=n.sourceLayer,a=n.state;o===t.id&&r===t.source&&i===t.sourceLayer&&a===t.state||(e.removeFeatureState({id:t.id,source:t.source,sourceLayer:t.sourceLayer}),e.setFeatureState({id:o,source:r,sourceLayer:i},a))},n.componentWillUnmount=function(){if(this._map&&this._map.getStyle()){var t=this.props,e=t.id,n=t.source,o=t.sourceLayer;this._map.removeFeatureState({id:e,source:n,sourceLayer:o})}},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))}}(o.PureComponent);var I=function(t){function e(e){var n;return i(u(n=t.call(this,e)||this),"_map",void 0),i(u(n),"_id",void 0),i(u(n),"_loadImage",(function(t,e){"string"!=typeof t?e(t):n._map.loadImage(t,(function(t,n){if(t)throw t;e(n)}))})),n._id=e.id,n}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this,e=this.props,n=e.image,o=e.pixelRatio,r=e.sdf;this._loadImage(n,(function(e){return t._map.addImage(t._id,e,{pixelRatio:o,sdf:r})}))},n.componentDidUpdate=function(t){var e=this,n=this.props,o=n.id,r=n.image,i=n.pixelRatio,a=n.sdf;if(o!==t.id||a!==t.sdf||i!==t.pixelRatio)return this._id=o,this._map.removeImage(t.id),void this._loadImage(r,(function(t){return e._map.addImage(e._id,t,{pixelRatio:i,sdf:a})}));r!==t.image&&this._loadImage(r,(function(t){return e._map.updateImage(e._id,t)}))},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.hasImage(this._id)&&this._map.removeImage(this._id)},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(I,"defaultProps",{pixelRatio:1,sdf:!1});var M=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.compact,o=e.customAttribution,r=e.position,i=new h.AttributionControl({compact:n,customAttribution:o});t.addControl(i,r),this._control=i},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(M,"defaultProps",{position:"bottom-right"});var P=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.container,o=e.position,r=new h.FullscreenControl({container:n});t.addControl(r,o),this._control=r},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(P,"defaultProps",{position:"top-right"});var A=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.positionOptions,o=e.fitBoundsOptions,r=e.trackUserLocation,i=e.showUserLocation,a=e.position,s=e.onTrackUserLocationEnd,c=e.onTrackUserLocationStart,u=e.onError,l=e.onGeolocate,p=new h.GeolocateControl({positionOptions:n,fitBoundsOptions:o,trackUserLocation:r,showUserLocation:i});s&&p.on("trackuserlocationend",s),c&&p.on("trackuserlocationstart",c),u&&p.on("error",u),l&&p.on("geolocate",l),t.addControl(p,a),this._control=p},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(A,"defaultProps",{positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0});var N=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.showCompass,o=e.showZoom,r=e.position,i=new h.NavigationControl({showCompass:n,showZoom:o});t.addControl(i,r),this._control=i},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(N,"defaultProps",{position:"top-right"});var k=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.maxWidth,o=e.unit,r=e.position,i=new h.ScaleControl({maxWidth:n,unit:o});t.addControl(i,r),this._control=i},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);function j(t,e){return t(e={exports:{}},e.exports),e.exports}i(k,"defaultProps",{position:"bottom-right",unit:"metric"});var F=j((function(t){function e(t){if(t=Object.assign({},t),!(this instanceof e))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=t.defaultLanguage,this._isLanguageField=t.languageField||/^\{name/,this._getLanguageField=t.getLanguageField||function(t){return"mul"===t?"{name}":"{name_"+t+"}"},this._languageSource=t.languageSource||null,this._languageTransform=t.languageTransform||function(t,e){return"ar"===e?function(t){var e=t.layers.map((function(t){if(!(t.layout||{})["text-field"])return t;return Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":0})})}));return Object.assign({},t,{layers:e})}(t):function(t){var e=t.layers.map((function(t){if(!(t.layout||{})["text-field"])return t;var e=0;return"state_label"===t["source-layer"]&&(e=.15),"marine_label"===t["source-layer"]&&(/-lg/.test(t.id)&&(e=.25),/-md/.test(t.id)&&(e=.15),/-sm/.test(t.id)&&(e=.1)),"place_label"===t["source-layer"]&&(/-suburb/.test(t.id)&&(e=.15),/-neighbour/.test(t.id)&&(e=.1),/-islet/.test(t.id)&&(e=.01)),"airport_label"===t["source-layer"]&&(e=.01),"rail_station_label"===t["source-layer"]&&(e=.01),"poi_label"===t["source-layer"]&&/-scalerank/.test(t.id)&&(e=.01),"road_label"===t["source-layer"]&&(/-label-/.test(t.id)&&(e=.01),/-shields/.test(t.id)&&(e=.05)),Object.assign({},t,{layout:Object.assign({},t.layout,{"text-letter-spacing":e})})}));return Object.assign({},t,{layers:e})}(t)},this._excludedLayerIds=t.excludedLayerIds||[],this.supportedLanguages=t.supportedLanguages||["ar","en","es","fr","de","ja","ko","mul","pt","ru","zh"]}function n(t,e,n){if(function(t,e){return"string"==typeof e&&t.test(e)}(t,e))return n;if(function(t,e){return e.stops&&e.stops.filter((function(e){return t.test(e[1])})).length>0}(t,e)){var o=e.stops.map((function(e){return t.test(e[1])?[e[0],n]:e}));return Object.assign({},e,{stops:o})}return e}e.prototype.setLanguage=function(t,e){if(this.supportedLanguages.indexOf(e)<0)throw new Error("Language "+e+" is not supported");var o=this._languageSource||function(t){return Object.keys(t.sources).filter((function(e){var n=t.sources[e];return/mapbox-streets-v\d/.test(n.url)}))[0]}(t);if(!o)return t;var r=this._getLanguageField(e),i=this._isLanguageField,a=this._excludedLayerIds,s=t.layers.map((function(t){return t.source===o?function(t,e,o,r){return e.layout&&e.layout["text-field"]&&-1===r.indexOf(e.id)?Object.assign({},e,{layout:Object.assign({},e.layout,{"text-field":n(t,e.layout["text-field"],o)})}):e}(i,t,r,a):t})),c=Object.assign({},t,{layers:s});return this._languageTransform(c,e)},e.prototype._initialStyleUpdate=function(){var t=this._map.getStyle(),e=this._defaultLanguage||function(t){var e=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,n=e.split("-"),o=e;return n.length>1&&(o=n[0]),t.indexOf(o)>-1?o:null}(this.supportedLanguages);this._map.off("styledata",this._initialStyleUpdate),this._map.setStyle(this.setLanguage(t,e))},e.prototype.onAdd=function(t){return this._map=t,this._map.on("styledata",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},e.prototype.onRemove=function(){this._map.off("styledata",this._initialStyleUpdate),this._map=void 0},t.exports=e})),D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),i(u(e),"_setLanguage",(function(){var t=e.props.language,n=e._map,o=e._control;t&&n.setStyle(o.setLanguage(n.getStyle(),t))})),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this._map,e=this.props,n=e.supportedLanguages,o=e.languageTransform,r=e.languageField,i=e.getLanguageField,a=e.languageSource,s=e.defaultLanguage,c=new F({supportedLanguages:n,languageTransform:o,languageField:r,getLanguageField:i,languageSource:a,defaultLanguage:s});t.addControl(c),this._control=c},n.componentDidUpdate=function(t){t.language!==this.props.language&&this._setLanguage()},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(D,"defaultProps",{});var R=j((function(t){var e=[{id:"traffic-street-link-bg",type:"line",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},source:"mapbox://mapbox.mapbox-traffic-v1","source-layer":"traffic",minzoom:15,filter:["all",["==","$type","LineString"],["all",["has","congestion"],["in","class","link","motorway_link","service","street"]]],layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[14,2.5],[20,15.5]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(145, 95%, 30%)"],["moderate","hsl(30, 100%, 42%)"],["heavy","hsl(355, 100%, 37%)"],["severe","hsl(355, 70%, 22%)"]]},"line-offset":{base:1.5,stops:[[14,2],[20,18]]},"line-opacity":{base:1,stops:[[15,0],[16,1]]}}},{id:"traffic-secondary-tertiary-bg",type:"line",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},source:"mapbox://mapbox.mapbox-traffic-v1","source-layer":"traffic",minzoom:6,filter:["all",["==","$type","LineString"],["all",["has","congestion"],["in","class","secondary","tertiary"]]],layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[9,1.5],[18,11],[20,16.5]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(145, 95%, 30%)"],["moderate","hsl(30, 100%, 42%)"],["heavy","hsl(355, 100%, 37%)"],["severe","hsl(355, 70%, 22%)"]]},"line-offset":{base:1.5,stops:[[10,.5],[15,5],[18,11],[20,14.5]]},"line-opacity":{base:1,stops:[[13,0],[14,1]]}}},{id:"traffic-primary-bg",type:"line",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},source:"mapbox://mapbox.mapbox-traffic-v1","source-layer":"traffic",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["has","congestion"]]],layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[10,.75],[15,6],[20,18]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(145, 95%, 30%)"],["moderate","hsl(30, 100%, 42%)"],["heavy","hsl(355, 100%, 37%)"],["severe","hsl(355, 70%, 22%)"]]},"line-offset":{base:1.2,stops:[[10,0],[12,1.5],[18,13],[20,16]]},"line-opacity":{base:1,stops:[[11,0],[12,1]]}}},{id:"traffic-trunk-bg",type:"line",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},source:"mapbox://mapbox.mapbox-traffic-v1","source-layer":"traffic",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["has","congestion"]]],layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[8,.5],[9,2.25],[18,13],[20,17.5]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(145, 95%, 30%)"],["moderate","hsl(30, 100%, 42%)"],["heavy","hsl(355, 100%, 37%)"],["severe","hsl(355, 70%, 22%)"]]},"line-offset":{base:1.5,stops:[[7,0],[9,1],[18,13],[20,18]]},"line-opacity":1}},{id:"traffic-motorway-bg",type:"line",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},source:"mapbox://mapbox.mapbox-traffic-v1","source-layer":"traffic",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["has","congestion"]]],layout:{visibility:"visible","line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[6,.5],[9,3],[18,16],[20,20]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(145, 95%, 30%)"],["moderate","hsl(30, 100%, 42%)"],["heavy","hsl(355, 100%, 37%)"],["severe","hsl(355, 70%, 22%)"]]},"line-opacity":1,"line-offset":{base:1.5,stops:[[7,0],[9,1.2],[11,1.2],[18,10],[20,15.5]]}}},{id:"traffic-primary",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},ref:"traffic-primary-bg",paint:{"line-width":{base:1.5,stops:[[10,1],[15,4],[20,16]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(142, 55%, 50%)"],["moderate","hsl(30, 100%, 55%)"],["heavy","hsl(355, 100%, 50%)"],["severe","hsl(355, 70%, 35%)"]]},"line-offset":{base:1.2,stops:[[10,0],[12,1.5],[18,13],[20,16]]},"line-opacity":1}},{id:"traffic-secondary-tertiary",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},ref:"traffic-secondary-tertiary-bg",paint:{"line-width":{base:1.5,stops:[[9,.5],[18,9],[20,14]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(142, 55%, 50%)"],["moderate","hsl(30, 100%, 55%)"],["heavy","hsl(355, 100%, 50%)"],["severe","hsl(355, 70%, 35%)"]]},"line-offset":{base:1.5,stops:[[10,.5],[15,5],[18,11],[20,14.5]]},"line-opacity":1}},{id:"traffic-street-link",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},ref:"traffic-street-link-bg",paint:{"line-width":{base:1.5,stops:[[14,1.5],[20,13.5]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(142, 55%, 50%)"],["moderate","hsl(30, 100%, 55%)"],["heavy","hsl(355, 100%, 50%)"],["severe","hsl(355, 70%, 35%)"]]},"line-offset":{base:1.5,stops:[[14,2],[20,18]]},"line-opacity":1}},{id:"traffic-trunk",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},ref:"traffic-trunk-bg",paint:{"line-width":{base:1.5,stops:[[8,.75],[18,11],[20,15]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(142, 55%, 50%)"],["moderate","hsl(30, 100%, 55%)"],["heavy","hsl(355, 100%, 50%)"],["severe","hsl(355, 70%, 35%)"]]},"line-offset":{base:1.5,stops:[[7,0],[9,1],[18,13],[20,18]]},"line-opacity":1}},{id:"traffic-motorway",metadata:{"mapbox:group":"4053de47c16e55481b10fd748eaa994c"},ref:"traffic-motorway-bg",paint:{"line-width":{base:1.5,stops:[[6,.5],[9,1.5],[18,14],[20,18]]},"line-color":{base:1,type:"categorical",property:"congestion",stops:[["low","hsl(142, 55%, 50%)"],["moderate","hsl(30, 100%, 55%)"],["heavy","hsl(355, 100%, 50%)"],["severe","hsl(355, 70%, 35%)"]]},"line-opacity":1,"line-offset":{base:1.5,stops:[[7,0],[9,1.2],[11,1.2],[18,10],[20,15.5]]}}}];function n(t){if(!(this instanceof n))throw new Error("MapboxTraffic needs to be called with the new keyword");this.options=Object.assign({showTraffic:!1,showTrafficButton:!0,trafficSource:/mapbox-traffic-v\d/},t),this.render=this.render.bind(this),this.toggleTraffic=this.toggleTraffic.bind(this),this._hideTraffic=this._hideTraffic.bind(this),this._showTraffic=this._showTraffic.bind(this),this._hasTraffic=this._hasTraffic.bind(this),this._toggle=new o({show:this.options.showTrafficButton,onToggle:this.toggleTraffic.bind(this)})}function o(t){var e;t=Object.assign({show:!0,onToggle:function(){}},t),this._btn=((e=document.createElement("button")).className="mapboxgl-ctrl-icon mapboxgl-ctrl-traffic",e.type="button",e["aria-label"]="Inspect",e),this._btn.onclick=t.onToggle,this.elem=function(t,e){var n=document.createElement("div");return n.className="mapboxgl-ctrl mapboxgl-ctrl-group",n.appendChild(t),e||(n.style.display="none"),n}(this._btn,t.show)}n.prototype._hasTraffic=function(){var t=this._map.getStyle(),e=this.options.trafficSource;return Object.keys(t.sources).filter((function(t){return e.test(t)})).length>0},n.prototype.toggleTraffic=function(){this.options.showTraffic=!this.options.showTraffic,this.render()},n.prototype.render=function(){if(!this._hasTraffic()){this._map.addSource("mapbox://mapbox.mapbox-traffic-v1",{type:"vector",url:"mapbox://mapbox.mapbox-traffic-v1"});var t=this._map.getStyle().layers.filter((function(t){return"road"===t["source-layer"]})),n=t[t.length-1].id,o=function(t,e,n){for(var o=0;o<t.layers.length;o++)if(n===t.layers[o].id){var r=t.layers.slice(0,o).concat(e).concat(t.layers.slice(o));return Object.assign({},t,{layers:r})}return t}(this._map.getStyle(),e,n);this._map.setStyle(o)}this.options.showTraffic?(this._showTraffic(),this._toggle.setMapIcon()):(this._hideTraffic(),this._toggle.setTrafficIcon())},n.prototype._hideTraffic=function(){var t=this._map.getStyle(),e=this.options.trafficSource;t.layers.forEach((function(t){e.test(t.source)&&(t.layout=t.layout||{},t.layout.visibility="none")})),this._map.setStyle(t)},n.prototype._showTraffic=function(){var t=this._map.getStyle(),e=this.options.trafficSource;t.layers.forEach((function(t){e.test(t.source)&&(t.layout=t.layout||{},t.layout.visibility="visible")})),this._map.setStyle(t)},n.prototype.onAdd=function(t){return this._map=t,t.on("load",this.render),this._toggle.elem},n.prototype.onRemove=function(){this._map.off("load",this.render);var t=this._toggle.elem;t.parentNode.removeChild(t),this._map=void 0},o.prototype.setTrafficIcon=function(){this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-traffic"},o.prototype.setMapIcon=function(){this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-map"},t.exports=n})),U=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),i(u(e),"_control",void 0),i(u(e),"_addControl",(function(){var t=e.props,n=t.showTraffic,o=t.showTrafficButton,r=t.trafficSource,i=new R({showTraffic:n,showTrafficButton:o,trafficSource:r});e._map.addControl(i),e._control=i})),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){this._addControl()},n.componentDidUpdate=function(t){t.showTraffic!==this.props.showTraffic&&this._control.toggleTraffic(),(t.showTrafficButton!==this.props.showTrafficButton||t.trafficSource!==this.props.trafficSource)&&(this._map.removeControl(this._control),this._addControl())},n.componentWillUnmount=function(){this._map&&this._map.getStyle()&&this._map.removeControl(this._control)},n.getControl=function(){return this._control},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(U,"defaultProps",{showTraffic:!1,showTrafficButton:!0,trafficSource:/mapbox-traffic-v\d/});var B=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i(u(e=t.call.apply(t,[this].concat(o))||this),"_map",void 0),e}s(e,t);var n=e.prototype;return n.componentDidMount=function(){this._setFilter()},n.componentDidUpdate=function(t){var e=t.filter,n=t.validate,o=this.props,r=o.filter,i=o.validate;(!x(e,r)||n!==i)&&this._setFilter()},n.componentWillUnmount=function(){if(this._map&&this._map.getStyle()){var t=this.props.layerId;void 0!==this._map.getLayer(t)&&this._map.setFilter(t,void 0)}},n._setFilter=function(){var t=this.props,e=t.layerId,n=t.filter,o=t.validate;void 0!==this._map.getLayer(e)&&(Array.isArray(n)?this._map.setFilter(e,n,{validate:o}):this._map.setFilter(e,void 0))},n.render=function(){var t=this;return Object(o.createElement)(d.Consumer,{},(function(e){return e&&(t._map=e),null}))},e}(o.PureComponent);i(B,"defaultProps",{validate:!0}),e.b=C}).call(this,n(62))},995:function(t,e){t.exports=function(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)}},996:function(t,e,n){t.exports={simple_select:n(1057),direct_select:n(1067),draw_point:n(1068),draw_polygon:n(1069),draw_line_string:n(1070)}},997:function(t,e,n){var o=n(980),r=n(1060),i=n(951);t.exports=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=e.geometry,c=s.type,u=s.coordinates,l=e.properties&&e.properties.id,p=[];function d(t,e){var i="",a=null;t.forEach((function(t,s){var c=void 0!==e&&null!==e?"".concat(e,".").concat(s):String(s),u=o(l,t,c,h(c));if(n.midpoints&&a){var d=r(l,a,u,n.map);d&&p.push(d)}a=u;var f=JSON.stringify(t);i!==f&&p.push(u),0===s&&(i=f)}))}function h(t){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(t)}function f(){var o=c.replace(i.geojsonTypes.MULTI_PREFIX,"");u.forEach((function(r,a){var s={type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o,coordinates:r}};p=p.concat(t(s,n,a))}))}return c===i.geojsonTypes.POINT?p.push(o(l,u,a,h(a))):c===i.geojsonTypes.POLYGON?u.forEach((function(t,e){d(t,null!==a?"".concat(a,".").concat(e):String(e))})):c===i.geojsonTypes.LINE_STRING?d(u,a):0===c.indexOf(i.geojsonTypes.MULTI_PREFIX)&&f(),p}},998:function(t,e,n){var o=n(999),r=n(951);t.exports=function(t,e){var n=o(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,o=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},a=function(t){return t.map((function(t){return i(t)}))};t.type===r.geojsonTypes.POINT?e=i(o):t.type===r.geojsonTypes.LINE_STRING||t.type===r.geojsonTypes.MULTI_POINT?e=o.map(i):t.type===r.geojsonTypes.POLYGON||t.type===r.geojsonTypes.MULTI_LINE_STRING?e=o.map(a):t.type===r.geojsonTypes.MULTI_POLYGON&&(e=o.map((function(t){return t.map((function(t){return a(t)}))}))),t.incomingCoords(e)}))}},999:function(t,e,n){var o=n(1061),r=n(951),i=r.LAT_MIN,a=r.LAT_MAX,s=r.LAT_RENDERED_MIN,c=r.LAT_RENDERED_MAX,u=r.LNG_MIN,l=r.LNG_MAX;t.exports=function(t,e){var n=i,r=a,p=i,d=a,h=l,f=u;t.forEach((function(t){var e=o(t),i=e[1],a=e[3],s=e[0],c=e[2];i>n&&(n=i),a<r&&(r=a),a>p&&(p=a),i<d&&(d=i),s<h&&(h=s),c>f&&(f=c)}));var g=e;return n+g.lat>c&&(g.lat=c-n),p+g.lat>a&&(g.lat=a-p),r+g.lat<s&&(g.lat=s-r),d+g.lat<i&&(g.lat=i-d),h+g.lng<=u&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),f+g.lng>=l&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}}}]);
//# sourceMappingURL=9.6c3bcb8b.chunk.js.map