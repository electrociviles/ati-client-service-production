(this.webpackJsonpati=this.webpackJsonpati||[]).push([[7],{950:function(e,t,a){},998:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(11),c=a(1),o=a.n(c),l=a(912),i=a(985),s=a(986),m=a(988),u=a(990),d=a(987),p=a(127),g=a(928),b=a(13),f=a(940),E=a(26),O=(a(950),a(955)),h=(a(956),a(925)),v=a(993),j=a(991),C=a(872),N=a(982),_=(a(957),function(e){var t=Object(c.useState)(""),a=Object(n.a)(t,2),r=a[0],l=a[1];return Object(c.useEffect)((function(){l(e.url)}),[e.url]),o.a.createElement("div",null,r?o.a.createElement(N.a,{src:r,zoomSrc:r}):"")}),y=a(958),S=a(90),k=a(907),x=a(921),w=a(911),I=a(908),B=a(914),T=a(247),W=Object(l.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(b.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})),F=o.a.forwardRef((function(e,t){return o.a.createElement(C.a,Object.assign({direction:"up",ref:t},e))})),P=function(e){var t=Object(c.useState)(null),a=Object(n.a)(t,2),r=a[0],l=a[1],u=Object(c.useState)([]),p=Object(n.a)(u,2),g=(p[0],p[1]),b=Object(c.useState)(""),C=Object(n.a)(b,2),N=C[0],P=C[1],R=Object(c.useState)(null),z=Object(n.a)(R,2),A=z[0],M=z[1],H=Object(c.useState)([]),V=Object(n.a)(H,2),G=V[0],L=V[1],D=Object(c.useState)([]),J=Object(n.a)(D,2),U=J[0],Z=J[1],q=Object(c.useState)([]),K=Object(n.a)(q,2),Q=(K[0],K[1]),X=Object(c.useState)([]),Y=Object(n.a)(X,2),$=Y[0],ee=Y[1],te=Object(c.useState)(!1),ae=Object(n.a)(te,2),ne=ae[0],re=ae[1],ce=Object(c.useState)(""),oe=Object(n.a)(ce,2),le=oe[0],ie=oe[1];Object(c.useEffect)((function(){l(e.project),P(e.project.type),g(e.project.boards)}),[N,r,e.project]);var se=function(e){return function(t){console.log(e);var a=e.itemsBoards.map((function(e){return 0===e.photos.length&&(e.photos=[{url:"default.png",type:"remote"}]),e}));e.itemsBoards=a,M(e);var n=e.itemsBoards.filter((function(e){return"before"==e.item.mode}));L(n);var r=e.itemsBoards.filter((function(e){return"voltaje"==e.item.type}));Z(r);var c=e.itemsBoards.filter((function(e){return"corriente"==e.item.type}));Q(c);var o=e.itemsBoards.filter((function(e){return"after"==e.item.mode}));ee(o)}},me=function(e){return function(t){console.log("showImages",e),ie(e),re(!0)}},ue=function(e){return function(t){console.log("currentCell",e),Object(T.r)(e._id).then((function(t){if("success"===t.status){switch(e.item.mode){case"before":var a=G.map((function(t){return console.log("cell ",t),t._id===e._id&&(t.status="activo"),t}));L(a);break;case"after":var n=$.map((function(t){return t._id===e._id&&(t.status="activo"),t}));ee(n)}switch(e.item.type){case"voltaje":var r=G.map((function(t){return t._id===e._id&&(t.status="activo"),t}));Z(r);break;case"corriente":var c=G.map((function(t){return t._id===e._id&&(t.status="activo"),t}));Q(c)}}}))}},de=function(){re(!1)},pe=W();return o.a.createElement(k.a,null,o.a.createElement(x.a,{title:"TABLEROS"}),o.a.createElement(w.a,null),o.a.createElement(I.a,{className:pe.content},o.a.createElement(i.a,null,o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"board__item__wrapper"},r?r.boards.map((function(e,t){return o.a.createElement("div",{key:t,className:"board_item"},o.a.createElement(f.a,{size:"small",color:"primary",label:e.name,variant:"outlined",onClick:se(e)}))})):""))),o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"project__wrapper"},o.a.createElement("div",{className:"project__info"},r?o.a.createElement(c.Fragment,null,o.a.createElement("div",{className:"project_name"},r.name),o.a.createElement("div",{className:"project_type"},"tri"===r.type?"Trif\xe1sico":"Monof\xe1sico"),o.a.createElement("div",{className:"board_name"},A?A.name:""),o.a.createElement("div",{className:"board_email"},A?o.a.createElement(S.c,{className:"icon",onClick:function(e){return function(t){Object(T.o)(e._id).then((function(e){console.log(e)}))}}(A)}):"")):""),o.a.createElement("div",{className:"project__board__wrapper"},o.a.createElement(c.Fragment,null,G.length>0?o.a.createElement(c.Fragment,null,o.a.createElement("div",{className:"title_action"},"IMAGENES ANTES DE MANTENIMIENTO"),o.a.createElement("div",{className:"board__item__wrapper"},G.map((function(e,t){return o.a.createElement("div",{className:"card",key:t},o.a.createElement("div",{className:"card_title"},e.item.title),""!==e.item.letterOne?o.a.createElement("div",{className:"card_colors"},o.a.createElement("div",{className:"card_color_left",style:{backgroundColor:"#FCF338"}},e.item.colorOne),o.a.createElement("div",{className:"card_color_right"})):"",o.a.createElement("div",{className:"card_header"},"inactivo"===e.status?o.a.createElement("div",{className:"show__wrapper"},o.a.createElement(y.a,{className:"icon",onClick:ue(e)}),o.a.createElement("div",{className:"show_text"},"Esta marcaci\xf3n se encuentra oculta pulse en el icono para mostrar")):""),o.a.createElement("div",{className:"card_body"},o.a.createElement("div",{className:"slide-container"},e.photos.length>0?o.a.createElement(O.Zoom,null,e.photos.map((function(e,t){return o.a.createElement("img",{key:t,style:{width:"100%"},src:"".concat(E.a.urlImages).concat(e.url),onClick:me("".concat(E.a.urlImages).concat(e.url))})}))):"")))})))):"",U.length>0?o.a.createElement(c.Fragment,null,o.a.createElement("div",{className:"title_action"},"VOLTAJES"),o.a.createElement("div",{className:"board__item__wrapper"},U.map((function(e,t){return o.a.createElement("div",{className:"card",key:t},o.a.createElement("div",{className:"card_title"},e.item.title),""!==e.item.letterOne?o.a.createElement("div",{className:"card_colors"},o.a.createElement("div",{className:"card_color_left",style:{backgroundColor:"#".concat(e.item.colorOne),color:"#".concat(e.item.textColorOne)}},e.item.letterOne),o.a.createElement("div",{className:"card_color_right",style:{backgroundColor:"#".concat(e.item.colorTwo),color:"#".concat(e.item.textColorTwo)}},e.item.letterTwo)):"",o.a.createElement("div",{className:"card_header"},"inactivo"===e.status?o.a.createElement("div",{className:"show__wrapper"},o.a.createElement(y.a,{className:"icon",onClick:ue(e)}),o.a.createElement("div",{className:"show_text"},"Esta marcaci\xf3n se encuentra oculta pulse en el icono para mostrar")):""),o.a.createElement("div",{className:"card_body"},o.a.createElement("div",{className:"slide-container"},e.photos.length>0?o.a.createElement(O.Zoom,null,e.photos.map((function(e,t){return o.a.createElement("img",{key:t,style:{width:"100%"},src:"".concat(E.a.urlImages).concat(e.url),onClick:me("".concat(E.a.urlImages).concat(e.url))})}))):"")),o.a.createElement("div",{className:"card_footer"},o.a.createElement("span",{className:"text_value"},"Valor:"),e.item.value))})))):"")))))))),o.a.createElement(h.a,{fullWidth:!0,maxWidth:"sm",open:ne,onClose:de,TransitionComponent:F},o.a.createElement(j.a,null,o.a.createElement(_,{url:le})),o.a.createElement(v.a,null,o.a.createElement(B.a,{autoFocus:!0,onClick:de,color:"primary"},"Cerrar"))))},R=a(926),z=a(959),A=a(3),M=a(918),H=a(1e3),V=a(66),G=a(944),L=(a(945),Object(l.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(b.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})));var D=function(e){Object(c.useEffect)((function(){console.log(e),Object(T.j)().then((function(e){v(e.customers)})),e.person}),[]);var t=Object(c.useState)(""),a=Object(n.a)(t,2),r=a[0],l=a[1],i=Object(c.useState)(!1),s=Object(n.a)(i,2),m=s[0],u=(s[1],Object(c.useState)({})),d=Object(n.a)(u,2),b=(d[0],d[1],L()),E=Object(c.useState)([]),O=Object(n.a)(E,2),h=O[0],v=O[1],j=Object(c.useState)(),C=Object(n.a)(j,2),N=C[0],_=C[1],y=Object(c.useState)(""),S=Object(n.a)(y,2),k=S[0],x=S[1],w=Object(c.useState)(""),I=Object(n.a)(w,2),W=(I[0],I[1],Object(c.useState)("")),F=Object(n.a)(W,2),P=(F[0],F[1],Object(c.useState)("")),D=Object(n.a)(P,2),J=(D[0],D[1],Object(c.useState)(null)),U=Object(n.a)(J,2),Z=(U[0],U[1],Object(c.useState)(!1)),q=Object(n.a)(Z,2),K=q[0],Q=q[1],X=Object(c.useState)(""),Y=Object(n.a)(X,2),$=Y[0],ee=Y[1],te=Object(c.useState)(!1),ae=Object(n.a)(te,2),ne=(ae[0],ae[1],Object(c.useState)("")),re=Object(n.a)(ne,2),ce=(re[0],re[1],function(e){var t=void 0!==e?e:k;return null==t||""===t.toString().trim()?(Q(!0),ee("Este campo es requerido"),1):(Q(!1),ee(""),0)}),oe=function(t){if(0===function(){var e=0;return e+=ce()}()){var a={name:k,type:r,customer:N._id};console.log(a),e.person?Object(T.v)(a).then((function(e){console.log("response",e),"success"==e.status?G.b.info("Proyecto registrado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):G.b.error("Ocurri\xf3 un error al registrar el proyecto",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})):Object(T.c)(a).then((function(e){console.log("response",e),"success"==e.status?G.b.info("Proyecto registrado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):G.b.error("Ocurri\xf3 un error al registrar el proyecto",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else G.b.error("\ud83e\udd84 Wow so easy!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return o.a.createElement(c.Fragment,null,o.a.createElement(G.a,null),o.a.createElement(z.a,{maxWidth:"md"},o.a.createElement(p.a,{className:b.paper},o.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(e){e.preventDefault(),oe()}},o.a.createElement(R.a,{container:!0,spacing:3},o.a.createElement(R.a,{item:!0,xs:12,sm:4},o.a.createElement(g.a,{fullWidth:!0,select:!0,className:Object(A.a)(b.margin,b.textField),variant:"outlined",label:"Tipo",margin:"dense",value:r,onChange:function(e){l(e.target.value)}},o.a.createElement(M.a,{key:"tri",value:"tri"},"Trif\xe1sico"),o.a.createElement(M.a,{key:"mono",value:"mono"},"Monof\xe1sico"))),o.a.createElement(R.a,{item:!0,xs:12,sm:8},o.a.createElement(H.a,{fullWidth:!0,size:"small",getOptionLabel:function(e){return"".concat(e.name.toString().toUpperCase()," ")},filterOptions:function(e){return e},options:h,autoComplete:!0,getOptionSelected:function(e,t){return e===t},onChange:function(e,t){_(t)},onInputChange:function(e,t){if(console.log("newInputValue",t),t.toString().trim().length>0){var a={search:t.toString().trim()};Object(T.j)(a).then((function(e){v(e.customers)}))}},renderInput:function(e){return o.a.createElement(g.a,Object.assign({},e,{label:"Cliente",variant:"outlined",margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,a){return o.a.createElement(f.a,Object.assign({label:e.name},t({index:a}),{disabled:-1!==h.indexOf(e)}))}))},renderOption:function(e){return o.a.createElement(R.a,{container:!0,alignItems:"center"},o.a.createElement(R.a,{item:!0,xs:!0},o.a.createElement(V.a,null,"".concat(e.name.toString().toUpperCase()))))}})),o.a.createElement(R.a,{item:!0,xs:12,sm:12},o.a.createElement(g.a,{fullWidth:!0,error:K,helperText:$,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(A.a)(b.margin,b.textField),variant:"outlined",label:"Descripci\xf3n",value:k,onChange:function(e){x(e.target.value),ce(e.target.value)}})),o.a.createElement(R.a,{item:!0,xs:2,sm:3},o.a.createElement(B.a,{disabled:m,type:"submit",variant:"contained",color:"primary"},e.person?"Actualizar":"Guardar")))))))},J=a(992),U=a(999),Z=a(9),q=a(989),K=a(910),Q=a(105),X=a.n(Q),Y=a(266),$=a.n(Y),ee=a(237),te=a(994),ae=a(935),ne=a(960),re=a.n(ne),ce=Object(l.a)((function(e){return{root:{flexGrow:1},iconWidth:{width:10},paper:{padding:e.spacing(2),marginTop:10},button:{margin:e.spacing(1)},input:{display:"none"},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},icon:{marginRight:e.spacing(1),color:"black"}}})),oe=Object(Z.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,c=Object(r.a)(e,["children","classes","onClose"]);return o.a.createElement(q.a,Object.assign({disableTypography:!0,className:a.root},c),o.a.createElement(V.a,{variant:"h6"},t),n?o.a.createElement(K.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(X.a,null)):null)})),le=o.a.forwardRef((function(e,t){return o.a.createElement(C.a,Object.assign({direction:"up",ref:t},e))}));t.default=function(e){Object(c.useEffect)((function(){Object(T.k)().then((function(e){b(e.projects),x(e.count)}))}),[]);var t=ce(),a=Object(c.useState)([]),r=Object(n.a)(a,2),l=r[0],b=r[1],E=Object(c.useState)(null),O=Object(n.a)(E,2),C=O[0],N=O[1],_=Object(c.useState)(0),y=Object(n.a)(_,2),k=y[0],x=y[1],w=Object(c.useState)(0),I=Object(n.a)(w,2),W=I[0],F=I[1],R=Object(c.useState)(10),z=Object(n.a)(R,2),A=z[0],M=z[1],H=Object(c.useState)(!1),V=Object(n.a)(H,2),L=V[0],Z=V[1],q=Object(c.useState)(!1),K=Object(n.a)(q,2),Q=K[0],X=K[1],Y=Object(c.useState)(!1),ne=Object(n.a)(Y,2),ie=ne[0],se=ne[1],me=Object(c.useState)(!1),ue=Object(n.a)(me,2),de=ue[0],pe=ue[1],ge=Object(c.useState)(""),be=Object(n.a)(ge,2),fe=be[0],Ee=be[1],Oe=Object(c.useState)(!1),he=Object(n.a)(Oe,2),ve=he[0],je=he[1],Ce=Object(c.useState)(!1),Ne=Object(n.a)(Ce,2),_e=(Ne[0],Ne[1],function(){Z(!1)}),ye=function(e){return function(){N(e),X(!0)}},Se=function(e){return function(){pe(!0),N(e)}},ke=function(){X(!1)},xe=function(){se(!1)},we=function(){pe(!1)};return o.a.createElement(c.Fragment,null,o.a.createElement(G.a,null),o.a.createElement(p.a,{className:t.paper},o.a.createElement(ae.a,{onClick:function(){se(!0)},variant:"extended",color:"primary",size:"small",className:t.margin},o.a.createElement($.a,{className:t.extendedIcon}),"Nuevo proyecto"),o.a.createElement(i.a,null,o.a.createElement(u.a,null,o.a.createElement(d.a,null,o.a.createElement(m.a,null,"DESCRIPCI\xd3N"),o.a.createElement(m.a,null,"CLIENTE"),o.a.createElement(m.a,null,"TABLEROS"),o.a.createElement(m.a,null,"VER"),o.a.createElement(m.a,null,"ENVIAR INFORME"),o.a.createElement(m.a,null,"OBSERVACIONES"))),o.a.createElement(s.a,null,l.map((function(e){return o.a.createElement(d.a,{key:e._id},o.a.createElement(m.a,null,e.name," "),o.a.createElement(m.a,null,e.customer.name),o.a.createElement(m.a,{className:t.iconWidth},o.a.createElement(f.a,{size:"small",label:e.boards.length,variant:"outlined"})),o.a.createElement(m.a,{className:t.iconWidth},o.a.createElement(ee.a,{className:"icon",onClick:ye(e)})),o.a.createElement(m.a,{className:t.iconWidth},e.loading?o.a.createElement("div",{className:"circularProgress"},o.a.createElement(te.a,{size:16})):o.a.createElement(ee.b,{className:"icon",onClick:(a=e._id,function(){console.log(a);var e=l.map((function(e){return e._id===a?e.loading=!0:e.loading=!1,e}));b(e),Object(T.p)(a).then((function(e){var t=l.map((function(e){return e.loading=!1,e}));b(t),"success"===e.status?re.a.fire({icon:"success",title:"Mensaje",text:e.message,showConfirmButton:!1,timer:3e3}):re.a.fire({icon:"error",title:"Error",text:e.message,showConfirmButton:!1,timer:3e3})})).catch((function(e){console.log(e),je(!1)}))})})),o.a.createElement(m.a,{className:t.iconWidth},o.a.createElement(S.a,{className:"icon",onClick:Se(e)})));var a})))),o.a.createElement(U.a,{rowsPerPageOptions:[10,25,100],component:"div",count:k,rowsPerPage:A,page:W,onChangePage:function(e,t){F(t)},onChangeRowsPerPage:function(e){M(+e.target.value),F(0)}})),o.a.createElement(h.a,{open:L,onClose:_e,"aria-labelledby":"draggable-dialog-title"},o.a.createElement(oe,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),o.a.createElement(j.a,null,o.a.createElement(J.a,null,"Esta seguro de eliminar esta atenci\xf3n?")),o.a.createElement(v.a,null,o.a.createElement(B.a,{autoFocus:!0,onClick:_e,color:"primary"},"NO"),o.a.createElement(B.a,{onClick:function(e){Z(!1),Object(T.g)(e).then((function(t){if("success"===t.status){G.b.success(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});var a=l.map((function(t){return e!==t._id||(t.status="deleted"),t}));b(a)}else G.b.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){G.b.error("Ocurri\xf3 un error al eliminar el proyecto",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"primary"},"SI"))),o.a.createElement(h.a,{maxWidth:"md",open:ie,onClose:xe,TransitionComponent:le},o.a.createElement(j.a,null,o.a.createElement(D,{onClose:xe,project:C})),o.a.createElement(v.a,null,o.a.createElement(B.a,{autoFocus:!0,onClick:xe,color:"primary"},"Cerrar"))),o.a.createElement(h.a,{fullWidth:!0,maxWidth:"lg",open:Q,onClose:ke,TransitionComponent:le},o.a.createElement(j.a,null,o.a.createElement(P,{project:C})),o.a.createElement(v.a,null,o.a.createElement(B.a,{autoFocus:!0,onClick:ke,color:"primary"},"Cerrar"))),o.a.createElement(h.a,{fullWidth:!0,maxWidth:"sm",open:de,onClose:we},o.a.createElement(oe,null,"Observaciones"),o.a.createElement(j.a,null,o.a.createElement(J.a,null,o.a.createElement(g.a,{autoComplete:"off",multiline:!0,autoFocus:!0,margin:"dense",id:"name",label:"Observaciones",onChange:function(e){Ee(e.target.value)},fullWidth:!0}))),o.a.createElement(v.a,null,ve?o.a.createElement("div",{className:"circularProgress"},o.a.createElement(te.a,null)):o.a.createElement(c.Fragment,null,o.a.createElement(B.a,{autoFocus:!0,onClick:we,color:"primary"},"Cancelar"),o.a.createElement(B.a,{onClick:function(){console.log(fe),console.log(C),je(!0);var e={observations:fe,id:C._id};Object(T.n)(e).then((function(e){je(!1),pe(!1),"success"===e.status?re.a.fire({icon:"success",title:"Mensaje",text:e.message,showConfirmButton:!1,timer:3e3}):re.a.fire({icon:"error",title:"Error",text:e.message,showConfirmButton:!1,timer:3e3})})).catch((function(e){console.log(e),je(!1)}))},color:"primary"},"Guardar")))))}}}]);
//# sourceMappingURL=7.6d8a523d.chunk.js.map