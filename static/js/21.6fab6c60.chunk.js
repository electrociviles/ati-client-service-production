(this.webpackJsonpati=this.webpackJsonpati||[]).push([[21],{1145:function(e,t,a){"use strict";a.r(t);var n=a(169),r=a(13),c=a(1),l=a.n(c),i=a(966),o=a(288),u=a(289),s=a(23),m=a(974),d=a(35),f=a(130),p=a(228),E=a(557),b=a.n(E),O=a(313),g=a.n(O),j=a(746),v=a(748),h=a(747),C=a(971),S=a(968),y=a(518),x=a(1048),k=a.n(x),A=a(15),N=a(82),w=a(973),F=a(3),W=a(511),T=a(585),_=a(1143),P=a(43),I=a(293),M=a(57),z=a(1041),q=(a(1044),a(137)),B=a.n(q),D=(a(1053),Object(i.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(A.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}}))),R=function(e){Object(c.useEffect)((function(){Object(P.y)().then((function(t){o(t.customers),e.centerOfAttention&&d(e.centerOfAttention.customer)})),e.centerOfAttention&&(C(e.centerOfAttention.title),g(e.centerOfAttention.description),d(e.centerOfAttention.customer))}),[]);var t=D(),a=Object(c.useState)([]),n=Object(r.a)(a,2),i=n[0],o=n[1],u=Object(c.useState)(),s=Object(r.a)(u,2),m=s[0],d=s[1],E=Object(c.useState)(""),b=Object(r.a)(E,2),O=b[0],g=b[1],j=Object(c.useState)(""),v=Object(r.a)(j,2),h=v[0],C=v[1],S=Object(c.useState)(""),y=Object(r.a)(S,2),x=y[0],k=(y[1],Object(c.useState)("")),A=Object(r.a)(k,2),q=A[0],R=(A[1],Object(c.useState)("")),U=Object(r.a)(R,2),G=(U[0],U[1],Object(c.useState)("")),H=Object(r.a)(G,2),V=H[0],J=H[1],L=Object(c.useState)(!1),Z=Object(r.a)(L,2),$=Z[0],K=Z[1],Q=Object(c.useState)(""),X=Object(r.a)(Q,2),Y=X[0],ee=X[1],te=Object(c.useState)(!1),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],ce=Object(c.useState)(""),le=Object(r.a)(ce,2),ie=le[0],oe=le[1],ue=Object(c.useState)(!1),se=Object(r.a)(ue,2),me=(se[0],se[1],Object(c.useState)("")),de=Object(r.a)(me,2),fe=(de[0],de[1],Object(c.useState)(!1)),pe=Object(r.a)(fe,2),Ee=(pe[0],pe[1],Object(c.useState)("")),be=Object(r.a)(Ee,2),Oe=(be[0],be[1],Object(c.useState)(!1)),ge=Object(r.a)(Oe,2),je=(ge[0],ge[1],Object(c.useState)("")),ve=Object(r.a)(je,2),he=(ve[0],ve[1],Object(c.useState)(!1)),Ce=Object(r.a)(he,2),Se=Ce[0],ye=Ce[1],xe=Object(c.useState)(""),ke=Object(r.a)(xe,2),Ae=(ke[0],ke[1]),Ne=Object(c.useState)(""),we=Object(r.a)(Ne,2),Fe=we[0],We=we[1],Te=Object(c.useState)(""),_e=Object(r.a)(Te,2),Pe=_e[0],Ie=_e[1],Me=Object(c.useState)(""),ze=Object(r.a)(Me,2),qe=ze[0],Be=ze[1],De=Object(c.useState)(""),Re=Object(r.a)(De,2),Ue=Re[0],Ge=Re[1],He=Object(c.useState)(!1),Ve=Object(r.a)(He,2),Je=Ve[0],Le=Ve[1],Ze=Object(c.useState)(""),$e=Object(r.a)(Ze,2),Ke=$e[0],Qe=$e[1],Xe=Object(c.useState)(!1),Ye=Object(r.a)(Xe,2),et=Ye[0],tt=Ye[1],at=Object(c.useState)(""),nt=Object(r.a)(at,2),rt=nt[0],ct=nt[1],lt=function(e){var t=void 0!==e?e:O;return null==t||""===t.toString().trim()?(re(!0),oe("Este campo es requerido"),1):(re(!1),oe(""),0)},it=function(e){var t=void 0!==e?e:h;return null==t||""===t.toString().trim()?(K(!0),ee("Este campo es requerido"),1):(K(!1),ee(""),0)},ot=function(e){var t=void 0!==e?e:V;return null==t||""===t.toString().trim()?(ye(!0),Ae("Este campo es requerido"),1):(ye(!1),Ae(""),0)},ut=function(e){var t=void 0!==e?e:Fe;return null==t||""===t.toString().trim()?(Le(!0),Qe("Este campo es requerido"),1):(Le(!1),Qe(""),0)},st=function(e){var t=void 0!==e?e:Pe;return null==t||""===t.toString().trim()?(tt(!0),ct("Este campo es requerido"),1):(tt(!1),ct(""),0)},mt=function(){if(0===function(){var e=0;return e+=lt(),e+=it()}()){var t={name:h,description:O,username:x,password:q,valueSemiAnnual:Fe,valueProvisioning:Pe,timeSemiAnnual:qe,timeProvisioning:Ue,customer:m._id,maintenanceCost:parseFloat(V)};e.centerOfAttention?(t.id=e.centerOfAttention._id,Object(P.Z)(t).then((function(t){"success"==t.status?(B.a.fire({icon:"success",title:"El centro de atenci\xf3n ".concat(h,"  fue actualizado exitosamente"),showConfirmButton:!1,timer:1500}),e.onClose(),e.passCenterOfAttentionEdit(t.centerOfAttention)):B.a.fire({icon:"error",title:"Ocurri\xf3 un error al actualizar el centro de atenci\xf3n ".concat(h),showConfirmButton:!1,timer:1500})}))):Object(P.e)(t).then((function(t){"success"==t.status?(B.a.fire({icon:"success",title:"El centro de atenci\xf3n ".concat(h,"  fue creado exitosamente"),showConfirmButton:!1,timer:1500}),e.onCloseModal(),e.passCreateCenterOfAttention(t.centerOfAttention)):B.a.fire({icon:"error",title:"Ocurri\xf3 un error al crear el centro de atenci\xf3n ".concat(h),showConfirmButton:!1,timer:1500})}))}else z.b.error("Faltan datos por llenar",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return l.a.createElement(c.Fragment,null,l.a.createElement(z.a,null),l.a.createElement(w.a,{maxWidth:"md"},l.a.createElement(f.a,{className:t.paper},l.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(e){e.preventDefault(),mt()}},l.a.createElement(N.a,{container:!0,spacing:3},l.a.createElement(N.a,{item:!0,xs:12,sm:12},l.a.createElement(_.a,{fullWidth:!0,size:"small",getOptionLabel:function(e){return"".concat(e.name.toString().toUpperCase()," ")},filterOptions:function(e){return e},options:i,autoComplete:!0,getOptionSelected:function(e,t){return e===t},onChange:function(e,t){d(t)},onInputChange:function(e,t){if(t.toString().trim().length>0){var a={search:t.toString().trim()};Object(P.y)(a).then((function(e){o(e.customers)}))}},renderInput:function(e){return l.a.createElement(W.a,Object.assign({},e,{label:"Cliente",variant:"outlined",margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,a){return l.a.createElement(I.a,Object.assign({label:e.name},t({index:a}),{disabled:-1!==i.indexOf(e)}))}))},renderOption:function(e){return l.a.createElement(N.a,{container:!0,alignItems:"center"},l.a.createElement(N.a,{item:!0,xs:!0},l.a.createElement(M.a,null,"".concat(e.name.toString().toUpperCase()))))}})),l.a.createElement(N.a,{item:!0,xs:12,sm:12},l.a.createElement(W.a,{fullWidth:!0,error:$,helperText:Y,margin:"dense",autoComplete:"off",className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Nombre del centro de atenci\xf3n",value:h,onChange:function(e){C(e.target.value),it(e.target.value)}})),l.a.createElement(N.a,{item:!0,xs:12,sm:12},l.a.createElement(W.a,{fullWidth:!0,error:ne,helperText:ie,margin:"dense",autoComplete:"off",className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Descripci\xf3n del centro de atenci\xf3n",value:O,onChange:function(e){g(e.target.value),lt(e.target.value)}})),l.a.createElement(N.a,{item:!0,xs:12,sm:6},l.a.createElement(M.a,null,"Costo de mantenimiento"),l.a.createElement(W.a,{fullWidth:!0,error:Se,helperText:Se,margin:"dense",autoComplete:"off",className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Costo del mantenimiento",value:V,onChange:function(e){J(e.target.value),ot(e.target.value)}})),l.a.createElement(N.a,{item:!0,xs:12,sm:12},l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement(M.a,null,"Vencimiento semestral")),l.a.createElement(N.a,{container:!0,spacing:3},l.a.createElement(N.a,{item:!0,xs:12,sm:6},l.a.createElement(W.a,{fullWidth:!0,select:!0,className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Medida",margin:"dense",value:qe,onChange:function(e){Be(e.target.value)}},l.a.createElement(T.a,{key:"year",value:"year"},"A\xf1o"),l.a.createElement(T.a,{key:"month",value:"month"},"Mes"),l.a.createElement(T.a,{key:"week",value:"week"},"Semana"),l.a.createElement(T.a,{key:"day",value:"day"},"Dia"),l.a.createElement(T.a,{key:"hour",value:"hour"},"Hora"),l.a.createElement(T.a,{key:"minute",value:"minute"},"Minuto"))),l.a.createElement(N.a,{item:!0,xs:12,sm:6},l.a.createElement(W.a,{fullWidth:!0,error:Je,helperText:Ke,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Tiempo",value:Fe,onChange:function(e){We(e.target.value),ut(e.target.value)}}))))),l.a.createElement(N.a,{item:!0,xs:12,sm:12},l.a.createElement("fieldset",null,l.a.createElement("legend",null,l.a.createElement(M.a,null,"Vencimiento aprovisionamiento")),l.a.createElement(N.a,{container:!0,spacing:3},l.a.createElement(N.a,{item:!0,xs:12,sm:6},l.a.createElement(W.a,{fullWidth:!0,select:!0,className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Medida",margin:"dense",value:Ue,onChange:function(e){Ge(e.target.value)}},l.a.createElement(T.a,{key:"year",value:"year"},"A\xf1o"),l.a.createElement(T.a,{key:"month",value:"month"},"Mes"),l.a.createElement(T.a,{key:"week",value:"week"},"Semana"),l.a.createElement(T.a,{key:"day",value:"day"},"Dia"),l.a.createElement(T.a,{key:"hour",value:"hour"},"Hora"),l.a.createElement(T.a,{key:"minute",value:"minute"},"Minuto"))),l.a.createElement(N.a,{item:!0,xs:12,sm:6},l.a.createElement(W.a,{fullWidth:!0,error:et,helperText:rt,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(F.a)(t.margin,t.textField),variant:"outlined",label:"Tiempo",value:Pe,onChange:function(e){Ie(e.target.value),st(e.target.value)}}))))),l.a.createElement(N.a,{item:!0,xs:2,sm:3},l.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},e.centerOfAttention?"Actualizar":"Guardar")))))))},U=a(139),G=a(576),H=a(969),V=a(1052),J=a(499),L=a(500),Z=a(583),$=a(582),K=Object(i.a)((function(e){return{root:{flexGrow:1},iconWidth:{width:10},paper:{padding:e.spacing(2),marginTop:10},button:{margin:e.spacing(1)},input:{display:"none"},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},icon:{marginRight:e.spacing(1),color:"black"}}})),Q=l.a.forwardRef((function(e,t){return l.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))}));t.default=function(){var e=K(),t=Object(c.useState)([]),a=Object(r.a)(t,2),i=a[0],E=a[1],O=Object(c.useState)(0),y=Object(r.a)(O,2),x=y[0],A=y[1],N=Object(c.useState)(10),w=Object(r.a)(N,2),F=w[0],W=w[1],T=Object(c.useState)(0),_=Object(r.a)(T,2),I=_[0],M=_[1],z=Object(c.useState)(!1),q=Object(r.a)(z,2),B=q[0],D=q[1],X=Object(c.useState)(!1),Y=Object(r.a)(X,2),ee=Y[0],te=Y[1],ae=Object(c.useState)(!1),ne=Object(r.a)(ae,2),re=ne[0],ce=ne[1],le=Object(c.useState)(!1),ie=Object(r.a)(le,2),oe=ie[0],ue=ie[1],se=Object(c.useState)(null),me=Object(r.a)(se,2),de=me[0],fe=me[1],pe=Object(c.useState)(!1),Ee=Object(r.a)(pe,2),be=Ee[0],Oe=Ee[1];Object(c.useEffect)((function(){var e={start:0,end:F};Object(P.x)(e).then((function(e){E(e.centersOfAttention),A(e.count)}))}),[]);var ge=function(e){return function(){fe(e),D(!0)}},je=function(e){return function(){fe(e),te(!0)}},ve=function(){D(!1)},he=function(){ce(!1)},Ce=function(){te(!1)},Se=function(){ue(!1)},ye=function(){Oe(!1)},xe=function(e){return function(){fe(e),Oe(!0)}};return l.a.createElement(c.Fragment,null,l.a.createElement(f.a,{className:e.paper},l.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){ue(!0)}},"Crear centro de atenci\xf3n"),l.a.createElement(o.a,null,l.a.createElement(m.a,null,l.a.createElement(d.a,null,l.a.createElement(s.a,null,"Nombre"),l.a.createElement(s.a,null,"Descripci\xf3n"),l.a.createElement(s.a,null,"Cliente"),l.a.createElement(s.a,{align:"right"},"Costo mantenimiento"),l.a.createElement(s.a,{colSpan:4},"Acciones"))),l.a.createElement(u.a,null,i.map((function(t){return l.a.createElement(d.a,{key:t._id},l.a.createElement(s.a,null,t.title," "),l.a.createElement(s.a,null,t.description," "),l.a.createElement(s.a,null,t.customer.name," "),l.a.createElement(s.a,{align:"right"},l.a.createElement(V.a,{value:t.maintenanceCost,displayType:"text",thousandSeparator:!0,prefix:"$"})),l.a.createElement(s.a,{className:e.iconWidth},t.administrative?"":l.a.createElement(G.a,{title:"Editar",placement:"top"},l.a.createElement("div",null,l.a.createElement(b.a,{className:e.icon,onClick:(a=t,function(){fe(a),ce(!0)})})))),l.a.createElement(s.a,{className:e.iconWidth},l.a.createElement(G.a,{title:"Eliminar",placement:"top"},l.a.createElement("div",null,"active"===t.status?l.a.createElement(g.a,{className:e.icon,onClick:ge(t)}):l.a.createElement(k.a,{className:e.icon,onClick:je(t)})))),l.a.createElement(s.a,{className:e.iconWidth},l.a.createElement(G.a,{title:"Usuarios",placement:"top"},l.a.createElement("div",null,l.a.createElement(U.f,{className:"icon",onClick:xe(t)})))));var a})))),l.a.createElement(H.a,{rowsPerPageOptions:[10,25,100],component:"div",count:x,rowsPerPage:F,page:I,onChangePage:function(e,t){M(t);var a={start:t*F,end:F};Object(P.x)(a).then((function(e){E(e.centersOfAttention),A(e.count)}))},onChangeRowsPerPage:function(e){W(+e.target.value),M(0);var t={start:0,end:e.target.value};Object(P.x)(t).then((function(e){E(e.centersOfAttention),A(e.count)}))}})),l.a.createElement(j.a,{open:B,onClose:ve,"aria-labelledby":"draggable-dialog-title"},l.a.createElement(S.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),l.a.createElement(h.a,null,l.a.createElement(C.a,null,"Esta seguro de desabilitar este centro de atenci\xf3n")),l.a.createElement(v.a,null,l.a.createElement(p.a,{autoFocus:!0,onClick:ve,color:"primary"},"NO"),l.a.createElement(p.a,{onClick:function(){D(!1),Object(P.k)(de._id).then((function(e){if("success"===e.status){var t=i.map((function(e){return de._id!==e._id||(e.status="inactive"),e}));E(t)}}))},color:"primary"},"SI"))),l.a.createElement(j.a,{open:ee,onClose:Ce},l.a.createElement(S.a,{style:{cursor:"move"}},"Alerta"),l.a.createElement(h.a,null,l.a.createElement(C.a,null,"Esta seguro de reactivar a este centro de atenci\xf3n?")),l.a.createElement(v.a,null,l.a.createElement(p.a,{autoFocus:!0,onClick:Ce,color:"primary"},"NO"),l.a.createElement(p.a,{onClick:function(){te(!1),Object(P.T)(de._id).then((function(e){if("success"===e.status){var t=i.map((function(e,t){return de._id!==e._id||(e.status="active"),e}));E(t)}}))},color:"primary"},"SI"))),l.a.createElement(j.a,{maxWidth:"md",open:re,onCloseEditCenterOfAttention:he,TransitionComponent:Q},l.a.createElement(h.a,null,l.a.createElement(R,{onClose:he,centerOfAttention:de,passCenterOfAttentionEdit:function(e){ce(!1);var t=i.map((function(t){return e._id!==t._id?t:t=e}));E(t)}})),l.a.createElement(v.a,null,l.a.createElement(p.a,{autoFocus:!0,onClick:he,color:"primary"},"Cerrar"))),l.a.createElement(j.a,{open:oe,onClose:Se,"aria-labelledby":"form-dialog-title"},l.a.createElement(S.a,null,"Crear centro de atenci\xf3n"),l.a.createElement(h.a,null,l.a.createElement(R,{onCloseModal:function(){ue(!1)},passCreateCenterOfAttention:function(e){E((function(t){return[].concat(Object(n.a)(t),[e])})),ue(!1)}})),l.a.createElement(v.a,null,l.a.createElement(p.a,{onClick:Se,color:"primary"},"Cerrar"))),l.a.createElement(j.a,{open:be,onClose:ye},l.a.createElement(S.a,null,"Usuarios"),l.a.createElement(h.a,null,l.a.createElement(C.a,null,l.a.createElement(J.a,{className:e.root},de?de.users.map((function(e){return l.a.createElement(L.a,{alignItems:"flex-start"},l.a.createElement($.a,null,l.a.createElement(U.e,{style:{fontSize:32,color:"grey"}})),l.a.createElement(Z.a,{primary:e.name,secondary:e.role.name}))})):""))),l.a.createElement(v.a,null,l.a.createElement(p.a,{autoFocus:!0,onClick:ye,color:"primary"},"Cerrar"))))}}}]);
//# sourceMappingURL=21.6fab6c60.chunk.js.map