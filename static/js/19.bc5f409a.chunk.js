(this.webpackJsonpati=this.webpackJsonpati||[]).push([[19],{1099:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(1),o=n.n(r),c=n(143),u=n(982),i=(n(981),n(987)),l=n(991),s=n(990),m=n(988),f=n(989),p=n(141),d=n(933),b=n(3),g=n(935),j=n(922),O=n(975),v=n(1003),E=(n(957),n(953)),h=n.n(E),z=n(920),Z=Object(z.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},input:{display:"none"},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}}));t.default=function(e){console.log("props",e);var t=Object(c.c)(u.a,{variables:{id:e.match.params.id},fetchPolicy:"no-cache",onCompleted:function(){H(t.getZone),J(t.getZone.zone_path),w(t.getZone.zone_path),_(t.getZone.name)}}).data,n=Object(c.b)(O.b),E=Object(a.a)(n,1)[0],z=Z(),x=Object(r.useState)(""),y=Object(a.a)(x,2),C=y[0],_=y[1],S=Object(r.useState)([]),k=Object(a.a)(S,2),$=k[0],w=k[1],L=Object(r.useState)(!1),I=Object(a.a)(L,2),N=I[0],A=I[1],D=Object(r.useState)(""),P=Object(a.a)(D,2),R=P[0],T=P[1],q=function(e){return""===(void 0!==e?e:C)?(A(!0),T("Este campo es obligatorio"),1):(A(!1),T(""),0)},B=Object(r.useState)([]),F=Object(a.a)(B,2),J=(F[0],F[1]),G=Object(r.useState)(null),M=Object(a.a)(G,2),W=M[0],H=M[1],K=Object(r.useRef)(null),Q=Object(r.useRef)([]),U=Object(r.useCallback)((function(){if(K.current){var e=K.current.getPath().getArray().map((function(e){return{lat:e.lat(),lng:e.lng()}}));J(e),w(e)}}),[]);Object(r.useCallback)((function(e){K.current=e;var t=e.getPath();Q.current.push(t.addListener("set_at",U),t.addListener("insert_at",U),t.addListener("remove_at",U))}),[U]),Object(r.useCallback)((function(){Q.current.forEach((function(e){return e.remove()})),K.current=null}),[]);return o.a.createElement(r.Fragment,null,o.a.createElement(d.a,{container:!0},o.a.createElement(d.a,{item:!0,xs:5},o.a.createElement(p.a,{className:z.paper},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=0;t+=q(),0===$.length&&Object(v.a)("Debe registrar un pol\xedgono"),0===t&&E({variables:{zone:{id:W.id,name:C,zone_path:$}}}).then((function(e){e.data.updateZone.status?(w([]),_(""),h.a.fire({icon:"success",title:"Mensaje",text:"Operaci\xf3n realizada exitosamente",showConfirmButton:!1,timer:3e3}),setTimeout((function(){}),4e3)):h.a.fire({icon:"error",title:"Error",text:e.data.updateZone.message,showConfirmButton:!1,timer:3e3})}))}()}},o.a.createElement(d.a,{container:!0,spacing:1},o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(g.a,{fullWidth:!0,error:N,helperText:R,id:"outlined-simple-start-adornment",className:Object(b.a)(z.margin,z.textField),variant:"outlined",autoComplete:"off",label:"Nombre de la zona",value:C,onChange:function(e){_(e.target.value),q(e.target.value)}})),o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(i.a,null,o.a.createElement(m.a,null,o.a.createElement(f.a,null,o.a.createElement(s.a,null,"Latitud"),o.a.createElement(s.a,null,"Longitud"))),o.a.createElement(l.a,null,$.map((function(e,t){return o.a.createElement(f.a,{key:t},o.a.createElement(s.a,null,e.lat),o.a.createElement(s.a,null,e.lng))}))))),o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(j.a,{variant:"contained",type:"submit",color:"primary"},"Actualizar zona")))))),o.a.createElement(d.a,{item:!0,xs:7},o.a.createElement("div",{className:"App"}))))}},975:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));var a=n(72),r=n(73),o=n.n(r);function c(){var e=Object(a.a)(["\n  mutation updateZone($zone: ZoneInput) \n  {\n    updateZone(zone: $zone)\n    {\n        status\n        message\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=Object(a.a)(["\n  mutation createZone($zone: ZoneInput) \n  {\n    createZone(zone: $zone)\n    {\n        status\n        message\n    }\n  }\n"]);return u=function(){return e},e}var i=o()(u()),l=o()(c())},981:function(e,t,n){},982:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var a=n(72),r=n(73),o=n.n(r);function c(){var e=Object(a.a)(["\n   query getZone($id: ID) {\n    getZone(id: $id) {\n            id\n            name \n            zone_path {\n                lat\n                lng\n            }\n        }\n    }\n"]);return c=function(){return e},e}function u(){var e=Object(a.a)(["\n   query getZones {\n    getZones {\n            id\n            name \n            zone_path {\n                lat\n                lng\n            }\n        }\n    }\n"]);return u=function(){return e},e}var i=o()(u()),l=o()(c())}}]);
//# sourceMappingURL=19.bc5f409a.chunk.js.map