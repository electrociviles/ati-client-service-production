(this.webpackJsonpati=this.webpackJsonpati||[]).push([[18],{1048:function(e,t,a){"use strict";var n=a(16);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(1)),l=(0,n(a(17)).default)(r.default.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"Restore");t.default=l},1143:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(12),l=a(1),o=a.n(l),c=a(966),i=a(288),s=a(289),u=a(23),m=a(974),d=a(35),g=a(130),p=a(15),b=a(486),f=a(510),E=a(493),O=a(487),h=Object(c.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(p.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})),v=function(e){console.log("props",e);var t=h(),a=Object(l.useState)(!1),r=Object(n.a)(a,2);r[0],r[1];return o.a.createElement(b.a,null,o.a.createElement(f.a,{title:"Detalle Usuario"}),o.a.createElement(E.a,null),o.a.createElement(O.a,{className:t.content},o.a.createElement(i.a,null,o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.a,null,"Nombres"),o.a.createElement(u.a,null,e.customer.name)),o.a.createElement(d.a,{selected:!0},o.a.createElement(u.a,null,"Nit"),o.a.createElement(u.a,null,e.customer.nit)),o.a.createElement(d.a,null,o.a.createElement(u.a,null,"Direcci\xf3n"),o.a.createElement(u.a,null,e.customer.address)),o.a.createElement(d.a,{selected:!0},o.a.createElement(u.a,null,"Telefono"),o.a.createElement(u.a,null,e.customer.phone)),o.a.createElement(d.a,null,o.a.createElement(u.a,null,"Correo electr\xf3nico"),o.a.createElement(u.a,null,e.customer.email))))))},j=a(228),C=a(557),S=a.n(C),x=a(313),y=a.n(x),N=a(746),k=a(748),P=a(747),W=a(971),F=a(322),w=a.n(F),B=a(518),T=a(1048),H=a.n(T),_=a(82),I=a(973),R=a(3),z=(a(1049),a(511)),M=a(43),U=a(1041),D=(a(1042),Object(c.a)((function(e){return{root:{flexGrow:1,height:250,minWidth:290},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(p.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},divider:{height:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},button:{margin:e.spacing(1)},fab:{marginTop:-2,float:"right"},extendedIcon:{marginRight:e.spacing(1)},formControl:{margin:e.spacing(1)}}})));var q=function(e){Object(l.useEffect)((function(){console.log(e),e.customer&&(m(e.customer.name),y(e.customer.nit),W(e.customer.address),T(e.customer.phone),A(e.customer.email))}),[]);var t=Object(l.useState)(!1),a=Object(n.a)(t,2),r=a[0],c=(a[1],D()),i=Object(l.useState)(""),s=Object(n.a)(i,2),u=s[0],m=s[1],d=Object(l.useState)(""),p=Object(n.a)(d,2),b=p[0],f=p[1],E=Object(l.useState)(""),O=Object(n.a)(E,2),h=O[0],v=O[1],C=Object(l.useState)(""),S=Object(n.a)(C,2),x=S[0],y=S[1],N=Object(l.useState)(""),k=Object(n.a)(N,2),P=k[0],W=k[1],F=Object(l.useState)(""),w=Object(n.a)(F,2),B=w[0],T=w[1],H=Object(l.useState)(""),q=Object(n.a)(H,2),G=q[0],A=q[1],V=Object(l.useState)(!1),J=Object(n.a)(V,2),L=(J[0],J[1]),Z=Object(l.useState)(""),K=Object(n.a)(Z,2),Q=(K[0],K[1]),X=Object(l.useState)(!1),Y=Object(n.a)(X,2),$=(Y[0],Y[1]),ee=Object(l.useState)(""),te=Object(n.a)(ee,2),ae=(te[0],te[1]),ne=Object(l.useState)(!1),re=Object(n.a)(ne,2),le=re[0],oe=re[1],ce=Object(l.useState)(""),ie=Object(n.a)(ce,2),se=ie[0],ue=ie[1],me=Object(l.useState)(!1),de=Object(n.a)(me,2),ge=de[0],pe=de[1],be=Object(l.useState)(""),fe=Object(n.a)(be,2),Ee=fe[0],Oe=fe[1],he=Object(l.useState)(!1),ve=Object(n.a)(he,2),je=(ve[0],ve[1],Object(l.useState)("")),Ce=Object(n.a)(je,2),Se=(Ce[0],Ce[1],Object(l.useState)(!1)),xe=Object(n.a)(Se,2),ye=(xe[0],xe[1],Object(l.useState)("")),Ne=Object(n.a)(ye,2),ke=(Ne[0],Ne[1],Object(l.useState)(!1)),Pe=Object(n.a)(ke,2),We=Pe[0],Fe=Pe[1],we=Object(l.useState)(""),Be=Object(n.a)(we,2),Te=Be[0],He=Be[1],_e=function(e){var t=void 0!==e?e:u;return null==t||""===t.toString().trim()?(oe(!0),ue("Este campo es requerido"),1):(oe(!1),ue(""),0)},Ie=function(e){var t=void 0!==e?e:x;return null==t||""===t.toString().trim()?(pe(!0),Oe("Este campo es requerido"),1):(pe(!1),Oe(""),0)},Re=function(e){var t=void 0!==e?e:G;return null==t||""===t.toString().trim()?(Fe(!0),He("Este campo es requerido"),1):(Fe(!1),He(""),0)},ze=function(e){var t=void 0!==e?e:b;return null==t||""===t.toString().trim()?(L(!0),Q("Este campo es requerido"),1):(L(!1),Q(""),0)},Me=function(e){var t=void 0!==e?e:h;return null==t||""===t.toString().trim()?($(!0),ae("Este campo es requerido"),1):($(!1),ae(""),0)},Ue=function(t){if(0===function(){var e=0;return e+=_e(),e+=Re(),e+=Ie()}()){var a={name:u,nit:x,address:P,phone:B,email:G,username:b,password:h};e.customer?(a.id=e.customer._id,Object(M.Z)(a).then((function(t){console.log("response",t),"success"==t.status?(U.b.info("Cliente actualizado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.onCloseModal(!0),e.onUpdateCustomers()):U.b.error("Ocurri\xf3 un error al registrar el cliente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))):Object(M.f)(a).then((function(t){console.log("response",t),"success"==t.status?(U.b.info("Cliente registrado exitosamente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.onCloseModal(!0),e.onUpdateCustomers()):U.b.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}};return o.a.createElement(l.Fragment,null,o.a.createElement(U.a,null),o.a.createElement(I.a,{maxWidth:"md"},o.a.createElement(g.a,{className:c.paper},o.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(e){e.preventDefault(),Ue()}},o.a.createElement(_.a,{container:!0,spacing:3},o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,error:le,helperText:se,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(R.a)(c.margin,c.textField),variant:"outlined",label:"Nombre",value:u,onChange:function(e){m(e.target.value),_e(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,error:ge,helperText:Ee,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(R.a)(c.margin,c.textField),variant:"outlined",value:x,onChange:function(e){y(e.target.value),Ie(e.target.value)},label:"Nit"})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(R.a)(c.margin,c.textField),variant:"outlined",label:"Direccion",value:P,onChange:function(e){W(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(R.a)(c.margin,c.textField),variant:"outlined",label:"Telefono",value:B,onChange:function(e){T(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,error:We,helperText:Te,margin:"dense",autoComplete:"off",id:"outlined-simple-start-adornment",className:Object(R.a)(c.margin,c.textField),variant:"outlined",value:G,label:"Correo",onChange:function(e){A(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,margin:"dense",autoComplete:"off",className:Object(R.a)(c.margin,c.textField),variant:"outlined",label:"Nombre de usuario",value:b,onChange:function(e){f(e.target.value),ze(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:12,sm:4},o.a.createElement(z.a,{fullWidth:!0,margin:"dense",autoComplete:"off",className:Object(R.a)(c.margin,c.textField),variant:"outlined",label:"Contrase\xf1a",value:h,onChange:function(e){v(e.target.value),Me(e.target.value)}})),o.a.createElement(_.a,{item:!0,xs:2,sm:12},o.a.createElement(j.a,{disabled:r,type:"submit",variant:"contained",color:"primary"},e.customer?"Actualizar":"Guardar")))))))},G=a(576),A=a(321),V=a.n(A),J=a(853),L=a(972),Z=a(9),K=a(970),Q=a(492),X=a(138),Y=a.n(X),$=a(57),ee=a(139),te=a(499),ae=a(500),ne=a(583),re=a(582),le=Object(c.a)((function(e){return{root:{flexGrow:1},iconWidth:{width:10},paper:{padding:e.spacing(2),marginTop:10},button:{margin:e.spacing(1)},input:{display:"none"},fab:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},icon:{marginRight:e.spacing(1),color:"black"}}})),oe=Object(Z.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,l=Object(r.a)(e,["children","classes","onClose"]);return o.a.createElement(K.a,Object.assign({disableTypography:!0,className:a.root},l),o.a.createElement($.a,{variant:"h6"},t),n?o.a.createElement(Q.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(Y.a,null)):null)})),ce=o.a.forwardRef((function(e,t){return o.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))}));t.default=function(e){Object(l.useEffect)((function(){var e={start:0,end:_,paginate:!0};Object(M.y)(e).then((function(e){p(e.customers),O(e.count)}))}),[]);var t=le(),a=Object(l.useState)([]),r=Object(n.a)(a,2),c=r[0],p=r[1],b=Object(l.useState)(0),f=Object(n.a)(b,2),E=f[0],O=f[1],h=Object(l.useState)(0),C=Object(n.a)(h,2),x=C[0],F=C[1],B=Object(l.useState)(10),T=Object(n.a)(B,2),_=T[0],I=T[1],R=Object(l.useState)(!1),z=Object(n.a)(R,2),D=z[0],A=z[1],Z=Object(l.useState)(!1),K=Object(n.a)(Z,2),Q=K[0],X=K[1],Y=Object(l.useState)(!1),$=Object(n.a)(Y,2),ie=$[0],se=$[1],ue=Object(l.useState)(!1),me=Object(n.a)(ue,2),de=me[0],ge=me[1],pe=Object(l.useState)(!1),be=Object(n.a)(pe,2),fe=be[0],Ee=be[1],Oe=Object(l.useState)(null),he=Object(n.a)(Oe,2),ve=he[0],je=he[1],Ce=Object(l.useState)(!1),Se=Object(n.a)(Ce,2),xe=Se[0],ye=Se[1],Ne=function(){Object(M.y)().then((function(e){console.log(e),p(e.customers),O(e.count)}))},ke=function(e){return function(){je(e),X(!0)}},Pe=function(){A(!1)},We=function(e){return function(){je(e),se(!0)}},Fe=function(){se(!1)},we=function(e){return function(){je(e),ge(!0)}},Be=function(){ge(!1)},Te=function(){X(!1)},He=function(){Ee(!1)},_e=function(){Ee(!1),ge(!1)},Ie=function(){ye(!1)},Re=function(e){return function(){je(e),ye(!0)}};return o.a.createElement(l.Fragment,null,o.a.createElement(U.a,null),o.a.createElement(g.a,{className:t.paper},o.a.createElement(J.a,{onClick:function(){Ee(!0)},variant:"extended",color:"primary",size:"small",className:t.margin},o.a.createElement(V.a,{className:t.extendedIcon}),"Nuevo cliente"),o.a.createElement(i.a,null,o.a.createElement(m.a,null,o.a.createElement(d.a,null,o.a.createElement(u.a,null,"NOMBRE"),o.a.createElement(u.a,null,"NIT"),o.a.createElement(u.a,null,"DIRECCION"),o.a.createElement(u.a,null,"TELEFONO"),o.a.createElement(u.a,null,"CORREO"),o.a.createElement(u.a,null),o.a.createElement(u.a,null),o.a.createElement(u.a,null),o.a.createElement(u.a,null))),o.a.createElement(s.a,null,c.map((function(e){return o.a.createElement(d.a,{key:e._id},o.a.createElement(u.a,null,e.name," "),o.a.createElement(u.a,null,e.nit),o.a.createElement(u.a,null,e.address),o.a.createElement(u.a,null,e.phone),o.a.createElement(u.a,null,e.email),o.a.createElement(u.a,{className:t.iconWidth},o.a.createElement(G.a,{title:"Detalle",placement:"top"},o.a.createElement(w.a,{className:t.icon,onClick:We(e)}))),o.a.createElement(u.a,{className:t.iconWidth},o.a.createElement(G.a,{title:"Editar",placement:"top"},o.a.createElement(S.a,{className:t.icon,onClick:we(e)}))),o.a.createElement(u.a,{className:t.iconWidth},o.a.createElement(G.a,{title:"Eliminar",placement:"top"},"activo"===e.status?o.a.createElement(y.a,{className:t.icon,onClick:(a=e._id,function(){je(a),A(!0)})}):o.a.createElement(H.a,{className:t.icon,onClick:ke(e._id)}))),o.a.createElement(u.a,{className:t.iconWidth},o.a.createElement(G.a,{title:"Usuarios",placement:"top"},o.a.createElement(ee.f,{className:"icon",onClick:Re(e)}))));var a})))),o.a.createElement(L.a,{rowsPerPageOptions:[10,25,100],component:"div",count:E,rowsPerPage:_,page:x,onChangePage:function(e,t){F(t);var a={start:t*_,end:_,paginate:!0};Object(M.y)(a).then((function(e){p(e.customers),O(e.count)}))},onChangeRowsPerPage:function(e){I(+e.target.value),F(0);var t={start:0,end:e.target.value,paginate:!0};Object(M.y)(t).then((function(e){p(e.customers),O(e.count)}))}})),o.a.createElement(N.a,{open:D,onClose:Pe,"aria-labelledby":"draggable-dialog-title"},o.a.createElement(oe,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),o.a.createElement(P.a,null,o.a.createElement(W.a,null,"Esta seguro de desabilitar este cliente?")),o.a.createElement(k.a,null,o.a.createElement(j.a,{autoFocus:!0,onClick:Pe,color:"primary"},"NO"),o.a.createElement(j.a,{onClick:function(){A(!1),Object(M.l)(ve).then((function(e){if("success"===e.status){U.b.success(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});var t=c.map((function(e){return ve!==e._id||(e.status="inactivo"),e}));p(t)}else U.b.error(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){U.b.error("Ocurri\xf3 un error al desactivar el cliente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"primary"},"SI"))),o.a.createElement(N.a,{open:Q,onClose:Te,"aria-labelledby":"draggable-dialog-title"},o.a.createElement(oe,{style:{cursor:"move"},id:"draggable-dialog-title"},"Alerta"),o.a.createElement(P.a,null,o.a.createElement(W.a,null,"Esta seguro de habilitar este cliente?")),o.a.createElement(k.a,null,o.a.createElement(j.a,{autoFocus:!0,onClick:Te,color:"primary"},"NO"),o.a.createElement(j.a,{onClick:function(){X(!1),Object(M.T)(ve).then((function(e){if("success"===e.status){U.b.success(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});var t=c.map((function(e){return ve!==e._id||(e.estado="activo"),e}));p(t)}else U.b.error(e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){U.b.error("Ocurri\xf3 un error al activar el cliente",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"primary"},"SI"))),o.a.createElement(N.a,{open:ie,onClose:Fe,TransitionComponent:ce},o.a.createElement(P.a,null,o.a.createElement(v,{customer:ve})),o.a.createElement(k.a,null,o.a.createElement(j.a,{autoFocus:!0,onClick:Fe,color:"primary"},"Cerrar"))),o.a.createElement(N.a,{maxWidth:"md",open:de,onClose:Be,TransitionComponent:ce},o.a.createElement(P.a,null,o.a.createElement(q,{onCloseModal:_e,onUpdateCustomers:Ne,customer:ve})),o.a.createElement(k.a,null,o.a.createElement(j.a,{autoFocus:!0,onClick:Be,color:"primary"},"Cerrar"))),o.a.createElement(N.a,{fullWidth:!0,maxWidth:"md",open:fe},o.a.createElement(oe,{onClose:He},"Crear cliente"),o.a.createElement(P.a,null,o.a.createElement(q,{handleClose:He,onCloseModal:_e,onUpdateCustomers:Ne,modal:!0})),o.a.createElement(k.a,null,o.a.createElement(j.a,{onClick:He,color:"primary"},"Cerrar"))),o.a.createElement(N.a,{open:xe,onClose:Ie},o.a.createElement(oe,null,"Usuarios"),o.a.createElement(P.a,null,o.a.createElement(W.a,null,o.a.createElement(te.a,{className:t.root},ve?ve.users.map((function(e){return o.a.createElement(ae.a,{alignItems:"flex-start"},o.a.createElement(re.a,null,o.a.createElement(ee.e,{style:{fontSize:32,color:"grey"}})),o.a.createElement(ne.a,{primary:e.name,secondary:e.role.name}),o.a.createElement(y.a,{className:t.icon,onClick:(a=e,function(){Object(M.P)({customer:ve._id,person:a._id}).then((function(e){if(console.log("response",e),"success"==e.status){var t=c.map((function(e){if(ve._id===e._id){var t=e.users.filter((function(e){return e._id!==a._id}));e.users=t}return e}));p(t),U.b.info("Usuario eliminado ",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}else U.b.error("Ocurri\xf3 un error al agregar el usuario",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})}));var a})):""))),o.a.createElement(k.a,null,o.a.createElement(j.a,{autoFocus:!0,onClick:Ie,color:"primary"},"Cerrar"))))}},971:function(e,t,a){"use strict";var n=a(2),r=a(1),l=(a(7),a(9)),o=a(57),c=r.forwardRef((function(e,t){return r.createElement(o.a,Object(n.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}));t.a=Object(l.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(c)}}]);
//# sourceMappingURL=18.b868f850.chunk.js.map